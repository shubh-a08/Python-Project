/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var Nh=Object.create;var wr=Object.defineProperty,Ah=Object.defineProperties,$h=Object.getOwnPropertyDescriptor,qh=Object.getOwnPropertyDescriptors,Bh=Object.getOwnPropertyNames,ro=Object.getOwnPropertySymbols,Mh=Object.getPrototypeOf,no=Object.prototype.hasOwnProperty,Hh=Object.prototype.propertyIsEnumerable;var io=(t,e,r)=>e in t?wr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S=(t,e)=>{for(var r in e||(e={}))no.call(e,r)&&io(t,r,e[r]);if(ro)for(var r of ro(e))Hh.call(e,r)&&io(t,r,e[r]);return t},q=(t,e)=>Ah(t,qh(e)),Uh=t=>wr(t,"__esModule",{value:!0});var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var jh=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Bh(e))!no.call(t,n)&&n!=="default"&&wr(t,n,{get:()=>e[n],enumerable:!(r=$h(e,n))||r.enumerable});return t},y=t=>jh(Uh(wr(t!=null?Nh(Mh(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var dt=p((pE,vo)=>{"use strict";var wo=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);vo.exports=t=>t?Object.keys(t).map(e=>[wo.has(e)?wo.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var Eo=p((mE,yo)=>{"use strict";yo.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Er=p((gE,xo)=>{"use strict";xo.exports=E;E.Node=Ge;E.create=E;function E(t){var e=this;if(e instanceof E||(e=new E),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}E.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};E.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};E.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};E.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)ap(this,arguments[t]);return this.length};E.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)cp(this,arguments[t]);return this.length};E.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};E.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};E.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};E.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};E.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};E.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};E.prototype.map=function(t,e){e=e||this;for(var r=new E,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};E.prototype.mapReverse=function(t,e){e=e||this;for(var r=new E,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};E.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};E.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};E.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};E.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};E.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new E;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};E.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new E;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};E.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=op(this,i,r[n]);return s};E.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function op(t,e,r){var n=e===t.head?new Ge(r,null,e,t):new Ge(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function ap(t,e){t.tail=new Ge(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function cp(t,e){t.head=new Ge(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ge(t,e,r,n){if(!(this instanceof Ge))return new Ge(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Eo()(E)}catch{}});var ht=p((wE,Oo)=>{"use strict";var up=require("events"),So=require("stream"),zt=Er(),Co=require("string_decoder").StringDecoder,xe=Symbol("EOF"),Gt=Symbol("maybeEmitEnd"),_e=Symbol("emittedEnd"),xr=Symbol("emittingEnd"),Sr=Symbol("closed"),bo=Symbol("read"),Gn=Symbol("flush"),Po=Symbol("flushChunk"),H=Symbol("encoding"),Se=Symbol("decoder"),Cr=Symbol("flowing"),Vt=Symbol("paused"),Jt=Symbol("resume"),B=Symbol("bufferLength"),Ro=Symbol("bufferPush"),Vn=Symbol("bufferShift"),N=Symbol("objectMode"),A=Symbol("destroyed"),Lo=global._MP_NO_ITERATOR_SYMBOLS_!=="1",lp=Lo&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),fp=Lo&&Symbol.iterator||Symbol("iterator not implemented"),_o=t=>t==="end"||t==="finish"||t==="prefinish",dp=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,hp=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);Oo.exports=class ko extends So{constructor(e){super();this[Cr]=!1,this[Vt]=!1,this.pipes=new zt,this.buffer=new zt,this[N]=e&&e.objectMode||!1,this[N]?this[H]=null:this[H]=e&&e.encoding||null,this[H]==="buffer"&&(this[H]=null),this[Se]=this[H]?new Co(this[H]):null,this[xe]=!1,this[_e]=!1,this[xr]=!1,this[Sr]=!1,this.writable=!0,this.readable=!0,this[B]=0,this[A]=!1}get bufferLength(){return this[B]}get encoding(){return this[H]}set encoding(e){if(this[N])throw new Error("cannot set encoding in objectMode");if(this[H]&&e!==this[H]&&(this[Se]&&this[Se].lastNeed||this[B]))throw new Error("cannot change encoding");this[H]!==e&&(this[Se]=e?new Co(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Se].write(r)))),this[H]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[N]}set objectMode(e){this[N]=this[N]||!!e}write(e,r,n){if(this[xe])throw new Error("write after end");return this[A]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[N]&&!Buffer.isBuffer(e)&&(hp(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):dp(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[B]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[N]&&!(r===this[H]&&!this[Se].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[H]&&(e=this[Se].write(e)),this.flowing?(this[B]!==0&&this[Gn](!0),this.emit("data",e)):this[Ro](e),this[B]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[A])return null;try{return this[B]===0||e===0||e>this[B]?null:(this[N]&&(e=null),this.buffer.length>1&&!this[N]&&(this.encoding?this.buffer=new zt([Array.from(this.buffer).join("")]):this.buffer=new zt([Buffer.concat(Array.from(this.buffer),this[B])])),this[bo](e||null,this.buffer.head.value))}finally{this[Gt]()}}[bo](e,r){return e===r.length||e===null?this[Vn]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[B]-=e),this.emit("data",r),!this.buffer.length&&!this[xe]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[xe]=!0,this.writable=!1,(this.flowing||!this[Vt])&&this[Gt](),this}[Jt](){this[A]||(this[Vt]=!1,this[Cr]=!0,this.emit("resume"),this.buffer.length?this[Gn]():this[xe]?this[Gt]():this.emit("drain"))}resume(){return this[Jt]()}pause(){this[Cr]=!1,this[Vt]=!0}get destroyed(){return this[A]}get flowing(){return this[Cr]}get paused(){return this[Vt]}[Ro](e){return this[N]?this[B]+=1:this[B]+=e.length,this.buffer.push(e)}[Vn](){return this.buffer.length&&(this[N]?this[B]-=1:this[B]-=this.buffer.head.value.length),this.buffer.shift()}[Gn](e){do;while(this[Po](this[Vn]()));!e&&!this.buffer.length&&!this[xe]&&this.emit("drain")}[Po](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[A])return;let n=this[_e];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:s=>this[Jt]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[Jt](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[Jt]():_o(e)&&this[_e]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[_e]}[Gt](){!this[xr]&&!this[_e]&&!this[A]&&this.buffer.length===0&&this[xe]&&(this[xr]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Sr]&&this.emit("close"),this[xr]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==A&&this[A])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[_e]===!0)return;this[_e]=!0,this.readable=!1,this[Se]&&(r=this[Se].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[Sr]=!0,!this[_e]&&!this[A]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{_o(e)?this.removeAllListeners(e):this[Gt]()}}collect(){let e=[];this[N]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[N]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[N]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[N]?Promise.reject(new Error("cannot concat in objectMode")):this[H]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(A,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[lp](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[xe])return Promise.resolve({done:!0});let n=null,i=null,s=u=>{this.removeListener("data",o),this.removeListener("end",a),i(u)},o=u=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:u,done:!!this[xe]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((u,l)=>{i=l,n=u,this.once(A,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[fp](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[A]?(e?this.emit("error",e):this.emit(A),this):(this[A]=!0,this.buffer=new zt,this[B]=0,typeof this.close=="function"&&!this[Sr]&&this.close(),e?this.emit("error",e):this.emit(A),this)}static isStream(e){return!!e&&(e instanceof ko||e instanceof So||e instanceof up&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Io=p((vE,To)=>{var pp=require("zlib").constants||{ZLIB_VERNUM:4736};To.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},pp))});var ri=p(z=>{"use strict";var Jn=require("assert"),ke=require("buffer").Buffer,Do=require("zlib"),Ve=z.constants=Io(),mp=ht(),Fo=ke.concat,Je=Symbol("_superWrite"),Kt=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},gp=Symbol("opts"),Yt=Symbol("flushFlag"),No=Symbol("finishFlushFlag"),Kn=Symbol("fullFlushFlag"),P=Symbol("handle"),br=Symbol("onError"),pt=Symbol("sawError"),Yn=Symbol("level"),Zn=Symbol("strategy"),Xn=Symbol("ended"),yE=Symbol("_defaultFullFlush"),Qn=class extends mp{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[pt]=!1,this[Xn]=!1,this[gp]=e,this[Yt]=e.flush,this[No]=e.finishFlush;try{this[P]=new Do[r](e)}catch(n){throw new Kt(n)}this[br]=n=>{this[pt]||(this[pt]=!0,this.close(),this.emit("error",n))},this[P].on("error",n=>this[br](new Kt(n))),this.once("end",()=>this.close)}close(){this[P]&&(this[P].close(),this[P]=null,this.emit("close"))}reset(){if(!this[pt])return Jn(this[P],"zlib binding closed"),this[P].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Kn]),this.write(Object.assign(ke.alloc(0),{[Yt]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[No]),this[Xn]=!0,super.end(null,null,n)}get ended(){return this[Xn]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=ke.from(e,r)),this[pt])return;Jn(this[P],"zlib binding closed");let i=this[P]._handle,s=i.close;i.close=()=>{};let o=this[P].close;this[P].close=()=>{},ke.concat=u=>u;let a;try{let u=typeof e[Yt]=="number"?e[Yt]:this[Yt];a=this[P]._processChunk(e,u),ke.concat=Fo}catch(u){ke.concat=Fo,this[br](new Kt(u))}finally{this[P]&&(this[P]._handle=i,i.close=s,this[P].close=o,this[P].removeAllListeners("error"))}this[P]&&this[P].on("error",u=>this[br](new Kt(u)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Je](ke.from(a[0]));for(let u=1;u<a.length;u++)c=this[Je](a[u])}else c=this[Je](ke.from(a));return n&&n(),c}[Je](e){return super.write(e)}},Oe=class extends Qn{constructor(e,r){e=e||{},e.flush=e.flush||Ve.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Ve.Z_FINISH;super(e,r);this[Kn]=Ve.Z_FULL_FLUSH,this[Yn]=e.level,this[Zn]=e.strategy}params(e,r){if(!this[pt]){if(!this[P])throw new Error("cannot switch params when binding is closed");if(!this[P].params)throw new Error("not supported in this implementation");if(this[Yn]!==e||this[Zn]!==r){this.flush(Ve.Z_SYNC_FLUSH),Jn(this[P],"zlib binding closed");let n=this[P].flush;this[P].flush=(i,s)=>{this.flush(i),s()};try{this[P].params(e,r)}finally{this[P].flush=n}this[P]&&(this[Yn]=e,this[Zn]=r)}}}},Ao=class extends Oe{constructor(e){super(e,"Deflate")}},$o=class extends Oe{constructor(e){super(e,"Inflate")}},ei=Symbol("_portable"),qo=class extends Oe{constructor(e){super(e,"Gzip");this[ei]=e&&!!e.portable}[Je](e){return this[ei]?(this[ei]=!1,e[9]=255,super[Je](e)):super[Je](e)}},Bo=class extends Oe{constructor(e){super(e,"Gunzip")}},Mo=class extends Oe{constructor(e){super(e,"DeflateRaw")}},Ho=class extends Oe{constructor(e){super(e,"InflateRaw")}},Uo=class extends Oe{constructor(e){super(e,"Unzip")}},ti=class extends Qn{constructor(e,r){e=e||{},e.flush=e.flush||Ve.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Ve.BROTLI_OPERATION_FINISH;super(e,r);this[Kn]=Ve.BROTLI_OPERATION_FLUSH}},jo=class extends ti{constructor(e){super(e,"BrotliCompress")}},Wo=class extends ti{constructor(e){super(e,"BrotliDecompress")}};z.Deflate=Ao;z.Inflate=$o;z.Gzip=qo;z.Gunzip=Bo;z.DeflateRaw=Mo;z.InflateRaw=Ho;z.Unzip=Uo;typeof Do.BrotliCompress=="function"?(z.BrotliCompress=jo,z.BrotliDecompress=Wo):z.BrotliCompress=z.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var mt=p((xE,zo)=>{var wp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;zo.exports=wp!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var Pr=p((CE,Go)=>{"use strict";var vp=ht(),ni=mt(),ii=Symbol("slurp");Go.exports=class extends vp{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=ni(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=ni(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[ii](r),n&&this[ii](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[ii](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?ni(e[n]):e[n])}}});var si=p(Rr=>{"use strict";Rr.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Rr.code=new Map(Array.from(Rr.name).map(t=>[t[1],t[0]]))});var Yo=p((PE,Ko)=>{"use strict";var yp=(t,e)=>{if(Number.isSafeInteger(t))t<0?xp(t,e):Ep(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Ep=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},xp=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=Vo(i):i===0?e[n-1]=0:(r=!0,e[n-1]=Jo(i))}},Sp=t=>{let e=t[0],r=e===128?bp(t.slice(1,t.length)):e===255?Cp(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},Cp=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var s=t[i],o;n?o=Vo(s):s===0?o=s:(n=!0,o=Jo(s)),o!==0&&(r-=o*Math.pow(256,e-i-1))}return r},bp=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},Vo=t=>(255^t)&255,Jo=t=>(255^t)+1&255;Ko.exports={encode:yp,parse:Sp}});var wt=p((RE,Qo)=>{"use strict";var oi=si(),gt=require("path").posix,Zo=Yo(),ai=Symbol("slurp"),G=Symbol("type"),Xo=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[G]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=Ke(e,r,100),this.mode=Te(e,r+100,8),this.uid=Te(e,r+108,8),this.gid=Te(e,r+116,8),this.size=Te(e,r+124,12),this.mtime=ci(e,r+136,12),this.cksum=Te(e,r+148,12),this[ai](n),this[ai](i,!0),this[G]=Ke(e,r+156,1),this[G]===""&&(this[G]="0"),this[G]==="0"&&this.path.substr(-1)==="/"&&(this[G]="5"),this[G]==="5"&&(this.size=0),this.linkpath=Ke(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=Ke(e,r+265,32),this.gname=Ke(e,r+297,32),this.devmaj=Te(e,r+329,8),this.devmin=Te(e,r+337,8),e[r+475]!==0){let o=Ke(e,r+345,155);this.path=o+"/"+this.path}else{let o=Ke(e,r+345,130);o&&(this.path=o+"/"+this.path),this.atime=ci(e,r+476,12),this.ctime=ci(e,r+488,12)}let s=8*32;for(let o=r;o<r+148;o++)s+=e[o];for(let o=r+156;o<r+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[ai](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=Pp(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=Ye(e,r,100,s)||this.needPax,this.needPax=Ie(e,r+100,8,this.mode)||this.needPax,this.needPax=Ie(e,r+108,8,this.uid)||this.needPax,this.needPax=Ie(e,r+116,8,this.gid)||this.needPax,this.needPax=Ie(e,r+124,12,this.size)||this.needPax,this.needPax=ui(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[G].charCodeAt(0),this.needPax=Ye(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=Ye(e,r+265,32,this.uname)||this.needPax,this.needPax=Ye(e,r+297,32,this.gname)||this.needPax,this.needPax=Ie(e,r+329,8,this.devmaj)||this.needPax,this.needPax=Ie(e,r+337,8,this.devmin)||this.needPax,this.needPax=Ye(e,r+345,n,o)||this.needPax,e[r+475]!==0?this.needPax=Ye(e,r+345,155,o)||this.needPax:(this.needPax=Ye(e,r+345,130,o)||this.needPax,this.needPax=ui(e,r+476,12,this.atime)||this.needPax,this.needPax=ui(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,Ie(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return oi.name.get(this[G])||this[G]}get typeKey(){return this[G]}set type(e){oi.code.has(e)?this[G]=oi.code.get(e):this[G]=e}},Pp=(t,e)=>{let r=100,n=t,i="",s,o=gt.parse(t).root||".";if(Buffer.byteLength(n)<r)s=[n,i,!1];else{i=gt.dirname(n),n=gt.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?s=[n.substr(0,r-1),i,!0]:(n=gt.join(gt.basename(i),n),i=gt.dirname(i));while(i!==o&&!s);s||(s=[t.substr(0,r-1),"",!0])}return s},Ke=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),ci=(t,e,r)=>Rp(Te(t,e,r)),Rp=t=>t===null?null:new Date(t*1e3),Te=(t,e,r)=>t[e]&128?Zo.parse(t.slice(e,e+r)):_p(t,e,r),Lp=t=>isNaN(t)?null:t,_p=(t,e,r)=>Lp(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),kp={12:8589934591,8:2097151},Ie=(t,e,r,n)=>n===null?!1:n>kp[r]||n<0?(Zo.encode(n,t.slice(e,e+r)),!0):(Op(t,e,r,n),!1),Op=(t,e,r,n)=>t.write(Tp(n,r),e,r,"ascii"),Tp=(t,e)=>Ip(Math.floor(t).toString(8),e),Ip=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",ui=(t,e,r,n)=>n===null?!1:Ie(t,e,r,n.getTime()/1e3),Dp=new Array(156).join("\0"),Ye=(t,e,r,n)=>n===null?!1:(t.write(n+Dp,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);Qo.exports=Xo});var _r=p((LE,ea)=>{"use strict";var Fp=wt(),Np=require("path"),Lr=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new Fp({path:("PaxHeader/"+Np.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let s=r+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};Lr.parse=(t,e,r)=>new Lr(Ap($p(t),e),r);var Ap=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,$p=t=>t.replace(/\n$/,"").split(`
`).reduce(qp,Object.create(null)),qp=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let s=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};ea.exports=Lr});var vt=p((_E,ta)=>{ta.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var kr=p((kE,ra)=>{"use strict";ra.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var fi=p((OE,na)=>{"use strict";var Or=["|","<",">","?",":"],li=Or.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Bp=new Map(Or.map((t,e)=>[t,li[e]])),Mp=new Map(li.map((t,e)=>[t,Or[e]]));na.exports={encode:t=>Or.reduce((e,r)=>e.split(r).join(Bp.get(r)),t),decode:t=>li.reduce((e,r)=>e.split(r).join(Mp.get(r)),t)}});var di=p((TE,sa)=>{var{isAbsolute:Hp,parse:ia}=require("path").win32;sa.exports=t=>{let e="",r=ia(t);for(;Hp(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=ia(t)}return[e,t]}});var aa=p((IE,oa)=>{"use strict";oa.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var xi=p((NE,Sa)=>{"use strict";var ca=ht(),ua=_r(),la=wt(),pe=require("fs"),fa=require("path"),me=mt(),Up=vt(),da=(t,e)=>e?(t=me(t).replace(/^\.(\/|$)/,""),Up(e)+"/"+t):me(t),jp=16*1024*1024,ha=Symbol("process"),pa=Symbol("file"),ma=Symbol("directory"),hi=Symbol("symlink"),ga=Symbol("hardlink"),Zt=Symbol("header"),Tr=Symbol("read"),pi=Symbol("lstat"),Ir=Symbol("onlstat"),mi=Symbol("onread"),gi=Symbol("onreadlink"),wi=Symbol("openfile"),vi=Symbol("onopenfile"),De=Symbol("close"),Dr=Symbol("mode"),yi=Symbol("awaitDrain"),Ei=Symbol("ondrain"),ge=Symbol("prefix"),wa=Symbol("hadError"),va=kr(),Wp=fi(),ya=di(),Ea=aa(),Fr=va(class extends ca{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=me(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||jp,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=me(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?me(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=ya(this.path);i&&(this.path=s,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=Wp.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=me(r.absolute||fa.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[Ir](this.statCache.get(this.absolute)):this[pi]()}emit(e,...r){return e==="error"&&(this[wa]=!0),super.emit(e,...r)}[pi](){pe.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Ir](r)})}[Ir](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Gp(e),this.emit("stat",e),this[ha]()}[ha](){switch(this.type){case"File":return this[pa]();case"Directory":return this[ma]();case"SymbolicLink":return this[hi]();default:return this.end()}}[Dr](e){return Ea(e,this.type==="Directory",this.portable)}[ge](e){return da(e,this.prefix)}[Zt](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new la({path:this[ge](this.path),linkpath:this.type==="Link"?this[ge](this.linkpath):this.linkpath,mode:this[Dr](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new ua({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[ge](this.path),linkpath:this.type==="Link"?this[ge](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[ma](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Zt](),this.end()}[hi](){pe.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[gi](r)})}[gi](e){this.linkpath=me(e),this[Zt](),this.end()}[ga](e){this.type="Link",this.linkpath=me(fa.relative(this.cwd,e)),this.stat.size=0,this[Zt](),this.end()}[pa](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[ga](r)}this.linkCache.set(e,this.absolute)}if(this[Zt](),this.stat.size===0)return this.end();this[wi]()}[wi](){pe.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[vi](r)})}[vi](e){if(this.fd=e,this[wa])return this[De]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Tr]()}[Tr](){let{fd:e,buf:r,offset:n,length:i,pos:s}=this;pe.read(e,r,n,i,s,(o,a)=>{if(o)return this[De](()=>this.emit("error",o));this[mi](a)})}[De](e){pe.close(this.fd,e)}[mi](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[De](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[De](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Ei]():this[yi](()=>this[Ei]())}[yi](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Ei](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[De](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Tr]()}}),xa=class extends Fr{[pi](){this[Ir](pe.lstatSync(this.absolute))}[hi](){this[gi](pe.readlinkSync(this.absolute))}[wi](){this[vi](pe.openSync(this.absolute,"r"))}[Tr](){let e=!0;try{let{fd:r,buf:n,offset:i,length:s,pos:o}=this,a=pe.readSync(r,n,i,s,o);this[mi](a),e=!1}finally{if(e)try{this[De](()=>{})}catch{}}}[yi](e){e()}[De](e){pe.closeSync(this.fd),e()}},zp=va(class extends ca{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=me(e.path),this.mode=this[Dr](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=me(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=ya(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new la({path:this[ge](this.path),linkpath:this.type==="Link"?this[ge](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new ua({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[ge](this.path),linkpath:this.type==="Link"?this[ge](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[ge](e){return da(e,this.prefix)}[Dr](e){return Ea(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Fr.Sync=xa;Fr.Tar=zp;var Gp=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";Sa.exports=Fr});var Ur=p(($E,Oa)=>{"use strict";var Si=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},Vp=ht(),Jp=ri(),Kp=Pr(),Ci=xi(),Yp=Ci.Sync,Zp=Ci.Tar,Xp=Er(),Ca=Buffer.alloc(1024),Nr=Symbol("onStat"),Ar=Symbol("ended"),we=Symbol("queue"),yt=Symbol("current"),Ze=Symbol("process"),$r=Symbol("processing"),ba=Symbol("processJob"),ve=Symbol("jobs"),bi=Symbol("jobDone"),qr=Symbol("addFSEntry"),Pa=Symbol("addTarEntry"),Pi=Symbol("stat"),Ri=Symbol("readdir"),Br=Symbol("onreaddir"),Mr=Symbol("pipe"),Ra=Symbol("entry"),Li=Symbol("entryOpt"),_i=Symbol("writeEntryClass"),La=Symbol("write"),ki=Symbol("ondrain"),Hr=require("fs"),_a=require("path"),Qp=kr(),Oi=mt(),Ti=Qp(class extends Vp{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Oi(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[_i]=Ci,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new Jp.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[ki]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[ki]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[we]=new Xp,this[ve]=0,this.jobs=+e.jobs||4,this[$r]=!1,this[Ar]=!1}[La](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[Ar]=!0,this[Ze](),this}write(e){if(this[Ar])throw new Error("write after end");return e instanceof Kp?this[Pa](e):this[qr](e),this.flowing}[Pa](e){let r=Oi(_a.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new Si(e.path,r,!1);n.entry=new Zp(e,this[Li](n)),n.entry.on("end",i=>this[bi](n)),this[ve]+=1,this[we].push(n)}this[Ze]()}[qr](e){let r=Oi(_a.resolve(this.cwd,e));this[we].push(new Si(e,r)),this[Ze]()}[Pi](e){e.pending=!0,this[ve]+=1;let r=this.follow?"stat":"lstat";Hr[r](e.absolute,(n,i)=>{e.pending=!1,this[ve]-=1,n?this.emit("error",n):this[Nr](e,i)})}[Nr](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[Ze]()}[Ri](e){e.pending=!0,this[ve]+=1,Hr.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[ve]-=1,r)return this.emit("error",r);this[Br](e,n)})}[Br](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[Ze]()}[Ze](){if(!this[$r]){this[$r]=!0;for(let e=this[we].head;e!==null&&this[ve]<this.jobs;e=e.next)if(this[ba](e.value),e.value.ignore){let r=e.next;this[we].removeNode(e),e.next=r}this[$r]=!1,this[Ar]&&!this[we].length&&this[ve]===0&&(this.zip?this.zip.end(Ca):(super.write(Ca),super.end()))}}get[yt](){return this[we]&&this[we].head&&this[we].head.value}[bi](e){this[we].shift(),this[ve]-=1,this[Ze]()}[ba](e){if(!e.pending){if(e.entry){e===this[yt]&&!e.piped&&this[Mr](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Nr](e,this.statCache.get(e.absolute)):this[Pi](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Br](e,this.readdirCache.get(e.absolute)):this[Ri](e),!e.readdir))){if(e.entry=this[Ra](e),!e.entry){e.ignore=!0;return}e===this[yt]&&!e.piped&&this[Mr](e)}}}[Li](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[Ra](e){this[ve]+=1;try{return new this[_i](e.path,this[Li](e)).on("end",()=>this[bi](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[ki](){this[yt]&&this[yt].entry&&this[yt].entry.resume()}[Mr](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qr](o+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),ka=class extends Ti{constructor(e){super(e);this[_i]=Yp}pause(){}resume(){}[Pi](e){let r=this.follow?"statSync":"lstatSync";this[Nr](e,Hr[r](e.absolute))}[Ri](e,r){this[Br](e,Hr.readdirSync(e.absolute))}[Mr](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[qr](o+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[La](i)})}};Ti.Sync=ka;Oa.exports=Ti});var Lt=p(Qt=>{"use strict";var em=ht(),tm=require("events").EventEmitter,U=require("fs"),Ii=U.writev;if(!Ii){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Ii=(r,n,i,s)=>{let o=(c,u)=>s(c,u,n),a=new e;a.oncomplete=o,t.writeBuffers(r,n,i,a)}}var Et=Symbol("_autoClose"),oe=Symbol("_close"),Xt=Symbol("_ended"),b=Symbol("_fd"),Ta=Symbol("_finished"),Fe=Symbol("_flags"),Di=Symbol("_flush"),Fi=Symbol("_handleChunk"),Ni=Symbol("_makeBuf"),jr=Symbol("_mode"),Wr=Symbol("_needDrain"),xt=Symbol("_onerror"),St=Symbol("_onopen"),Ai=Symbol("_onread"),Ct=Symbol("_onwrite"),Ne=Symbol("_open"),Ce=Symbol("_path"),Xe=Symbol("_pos"),ye=Symbol("_queue"),bt=Symbol("_read"),Ia=Symbol("_readSize"),Ae=Symbol("_reading"),zr=Symbol("_remain"),Da=Symbol("_size"),Gr=Symbol("_write"),Pt=Symbol("_writing"),Vr=Symbol("_defaultFlag"),Rt=Symbol("_errored"),$i=class extends em{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Rt]=!1,this[b]=typeof r.fd=="number"?r.fd:null,this[Ce]=e,this[Ia]=r.readSize||16*1024*1024,this[Ae]=!1,this[Da]=typeof r.size=="number"?r.size:1/0,this[zr]=this[Da],this[Et]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[b]=="number"?this[bt]():this[Ne]()}get fd(){return this[b]}get path(){return this[Ce]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Ne](){U.open(this[Ce],"r",(e,r)=>this[St](e,r))}[St](e,r){e?this[xt](e):(this[b]=r,this.emit("open",r),this[bt]())}[Ni](){return Buffer.allocUnsafe(Math.min(this[Ia],this[zr]))}[bt](){if(!this[Ae]){this[Ae]=!0;let e=this[Ni]();if(e.length===0)return process.nextTick(()=>this[Ai](null,0,e));U.read(this[b],e,0,e.length,null,(r,n,i)=>this[Ai](r,n,i))}}[Ai](e,r,n){this[Ae]=!1,e?this[xt](e):this[Fi](r,n)&&this[bt]()}[oe](){if(this[Et]&&typeof this[b]=="number"){let e=this[b];this[b]=null,U.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[xt](e){this[Ae]=!0,this[oe](),this.emit("error",e)}[Fi](e,r){let n=!1;return this[zr]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[zr]<=0)&&(n=!1,this[oe](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[b]=="number"&&this[bt]();break;case"error":return this[Rt]?void 0:(this[Rt]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Fa=class extends $i{[Ne](){let e=!0;try{this[St](null,U.openSync(this[Ce],"r")),e=!1}finally{e&&this[oe]()}}[bt](){let e=!0;try{if(!this[Ae]){this[Ae]=!0;do{let r=this[Ni](),n=r.length===0?0:U.readSync(this[b],r,0,r.length,null);if(!this[Fi](n,r))break}while(!0);this[Ae]=!1}e=!1}finally{e&&this[oe]()}}[oe](){if(this[Et]&&typeof this[b]=="number"){let e=this[b];this[b]=null,U.closeSync(e),this.emit("close")}}},qi=class extends tm{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[Rt]=!1,this[Pt]=!1,this[Xt]=!1,this[Wr]=!1,this[ye]=[],this[Ce]=e,this[b]=typeof r.fd=="number"?r.fd:null,this[jr]=r.mode===void 0?438:r.mode,this[Xe]=typeof r.start=="number"?r.start:null,this[Et]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[Xe]!==null?"r+":"w";this[Vr]=r.flags===void 0,this[Fe]=this[Vr]?n:r.flags,this[b]===null&&this[Ne]()}emit(e,r){if(e==="error"){if(this[Rt])return;this[Rt]=!0}return super.emit(e,r)}get fd(){return this[b]}get path(){return this[Ce]}[xt](e){this[oe](),this[Pt]=!0,this.emit("error",e)}[Ne](){U.open(this[Ce],this[Fe],this[jr],(e,r)=>this[St](e,r))}[St](e,r){this[Vr]&&this[Fe]==="r+"&&e&&e.code==="ENOENT"?(this[Fe]="w",this[Ne]()):e?this[xt](e):(this[b]=r,this.emit("open",r),this[Di]())}end(e,r){return e&&this.write(e,r),this[Xt]=!0,!this[Pt]&&!this[ye].length&&typeof this[b]=="number"&&this[Ct](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Xt]?(this.emit("error",new Error("write() after end()")),!1):this[b]===null||this[Pt]||this[ye].length?(this[ye].push(e),this[Wr]=!0,!1):(this[Pt]=!0,this[Gr](e),!0)}[Gr](e){U.write(this[b],e,0,e.length,this[Xe],(r,n)=>this[Ct](r,n))}[Ct](e,r){e?this[xt](e):(this[Xe]!==null&&(this[Xe]+=r),this[ye].length?this[Di]():(this[Pt]=!1,this[Xt]&&!this[Ta]?(this[Ta]=!0,this[oe](),this.emit("finish")):this[Wr]&&(this[Wr]=!1,this.emit("drain"))))}[Di](){if(this[ye].length===0)this[Xt]&&this[Ct](null,0);else if(this[ye].length===1)this[Gr](this[ye].pop());else{let e=this[ye];this[ye]=[],Ii(this[b],e,this[Xe],(r,n)=>this[Ct](r,n))}}[oe](){if(this[Et]&&typeof this[b]=="number"){let e=this[b];this[b]=null,U.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Na=class extends qi{[Ne](){let e;if(this[Vr]&&this[Fe]==="r+")try{e=U.openSync(this[Ce],this[Fe],this[jr])}catch(r){if(r.code==="ENOENT")return this[Fe]="w",this[Ne]();throw r}else e=U.openSync(this[Ce],this[Fe],this[jr]);this[St](null,e)}[oe](){if(this[Et]&&typeof this[b]=="number"){let e=this[b];this[b]=null,U.closeSync(e),this.emit("close")}}[Gr](e){let r=!0;try{this[Ct](null,U.writeSync(this[b],e,0,e.length,this[Xe])),r=!1}finally{if(r)try{this[oe]()}catch{}}}};Qt.ReadStream=$i;Qt.ReadStreamSync=Fa;Qt.WriteStream=qi;Qt.WriteStreamSync=Na});var en=p((ME,Ua)=>{"use strict";var rm=kr(),nm=wt(),im=require("events"),sm=Er(),om=1024*1024,am=Pr(),Aa=_r(),cm=ri(),Bi=Buffer.from([31,139]),X=Symbol("state"),Qe=Symbol("writeEntry"),be=Symbol("readEntry"),Mi=Symbol("nextEntry"),$a=Symbol("processEntry"),Q=Symbol("extendedHeader"),er=Symbol("globalExtendedHeader"),$e=Symbol("meta"),qa=Symbol("emitMeta"),R=Symbol("buffer"),Pe=Symbol("queue"),et=Symbol("ended"),Ba=Symbol("emittedEnd"),tt=Symbol("emit"),j=Symbol("unzip"),Jr=Symbol("consumeChunk"),Kr=Symbol("consumeChunkSub"),Hi=Symbol("consumeBody"),Ma=Symbol("consumeMeta"),Ha=Symbol("consumeHeader"),Yr=Symbol("consuming"),Ui=Symbol("bufferConcat"),ji=Symbol("maybeEnd"),tr=Symbol("writing"),qe=Symbol("aborted"),Zr=Symbol("onDone"),rt=Symbol("sawValidEntry"),Xr=Symbol("sawNullBlock"),Qr=Symbol("sawEOF"),um=t=>!0;Ua.exports=rm(class extends im{constructor(e){e=e||{};super(e);this.file=e.file||"",this[rt]=null,this.on(Zr,r=>{(this[X]==="begin"||this[rt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Zr,e.ondone):this.on(Zr,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||om,this.filter=typeof e.filter=="function"?e.filter:um,this.writable=!0,this.readable=!1,this[Pe]=new sm,this[R]=null,this[be]=null,this[Qe]=null,this[X]="begin",this[$e]="",this[Q]=null,this[er]=null,this[et]=!1,this[j]=null,this[qe]=!1,this[Xr]=!1,this[Qr]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Ha](e,r){this[rt]===null&&(this[rt]=!1);let n;try{n=new nm(e,r,this[Q],this[er])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Xr]?(this[Qr]=!0,this[X]==="begin"&&(this[X]="header"),this[tt]("eof")):(this[Xr]=!0,this[tt]("nullBlock"));else if(this[Xr]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Qe]=new am(n,this[Q],this[er]);if(!this[rt])if(s.remain){let o=()=>{s.invalid||(this[rt]=!0)};s.on("end",o)}else this[rt]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[tt]("ignoredEntry",s),this[X]="ignore",s.resume()):s.size>0&&(this[$e]="",s.on("data",o=>this[$e]+=o),this[X]="meta"):(this[Q]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[tt]("ignoredEntry",s),this[X]=s.remain?"ignore":"header",s.resume()):(s.remain?this[X]="body":(this[X]="header",s.end()),this[be]?this[Pe].push(s):(this[Pe].push(s),this[Mi]())))}}}[$a](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[be]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[Mi]()),r=!1)):(this[be]=null,r=!1),r}[Mi](){do;while(this[$a](this[Pe].shift()));if(!this[Pe].length){let e=this[be];!e||e.flowing||e.size===e.remain?this[tr]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Hi](e,r){let n=this[Qe],i=n.blockRemain,s=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(s),n.blockRemain||(this[X]="header",this[Qe]=null,n.end()),s.length}[Ma](e,r){let n=this[Qe],i=this[Hi](e,r);return this[Qe]||this[qa](n),i}[tt](e,r,n){!this[Pe].length&&!this[be]?this.emit(e,r,n):this[Pe].push([e,r,n])}[qa](e){switch(this[tt]("meta",this[$e]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Q]=Aa.parse(this[$e],this[Q],!1);break;case"GlobalExtendedHeader":this[er]=Aa.parse(this[$e],this[er],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Q]=this[Q]||Object.create(null),this[Q].path=this[$e].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Q]=this[Q]||Object.create(null),this[Q].linkpath=this[$e].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[qe]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[qe])return;if(this[j]===null&&e){if(this[R]&&(e=Buffer.concat([this[R],e]),this[R]=null),e.length<Bi.length)return this[R]=e,!0;for(let n=0;this[j]===null&&n<Bi.length;n++)e[n]!==Bi[n]&&(this[j]=!1);if(this[j]===null){let n=this[et];this[et]=!1,this[j]=new cm.Unzip,this[j].on("data",s=>this[Jr](s)),this[j].on("error",s=>this.abort(s)),this[j].on("end",s=>{this[et]=!0,this[Jr]()}),this[tr]=!0;let i=this[j][n?"end":"write"](e);return this[tr]=!1,i}}this[tr]=!0,this[j]?this[j].write(e):this[Jr](e),this[tr]=!1;let r=this[Pe].length?!1:this[be]?this[be].flowing:!0;return!r&&!this[Pe].length&&this[be].once("drain",n=>this.emit("drain")),r}[Ui](e){e&&!this[qe]&&(this[R]=this[R]?Buffer.concat([this[R],e]):e)}[ji](){if(this[et]&&!this[Ba]&&!this[qe]&&!this[Yr]){this[Ba]=!0;let e=this[Qe];if(e&&e.blockRemain){let r=this[R]?this[R].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[R]&&e.write(this[R]),e.end()}this[tt](Zr)}}[Jr](e){if(this[Yr])this[Ui](e);else if(!e&&!this[R])this[ji]();else{if(this[Yr]=!0,this[R]){this[Ui](e);let r=this[R];this[R]=null,this[Kr](r)}else this[Kr](e);for(;this[R]&&this[R].length>=512&&!this[qe]&&!this[Qr];){let r=this[R];this[R]=null,this[Kr](r)}this[Yr]=!1}(!this[R]||this[et])&&this[ji]()}[Kr](e){let r=0,n=e.length;for(;r+512<=n&&!this[qe]&&!this[Qr];)switch(this[X]){case"begin":case"header":this[Ha](e,r),r+=512;break;case"ignore":case"body":r+=this[Hi](e,r);break;case"meta":r+=this[Ma](e,r);break;default:throw new Error("invalid state: "+this[X])}r<n&&(this[R]?this[R]=Buffer.concat([e.slice(r),this[R]]):this[R]=e.slice(r))}end(e){this[qe]||(this[j]?this[j].end(e):(this[et]=!0,this.write(e)))}})});var tn=p((HE,Ga)=>{"use strict";var lm=dt(),ja=en(),_t=require("fs"),fm=Lt(),Wa=require("path"),Wi=vt();Ga.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=lm(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&hm(n,e),n.noResume||dm(n),n.file&&n.sync?pm(n):n.file?mm(n,r):za(n)};var dm=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},hm=(t,e)=>{let r=new Map(e.map(s=>[Wi(s),!0])),n=t.filter,i=(s,o)=>{let a=o||Wa.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(Wa.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(Wi(s)):s=>i(Wi(s))},pm=t=>{let e=za(t),r=t.file,n=!0,i;try{let s=_t.statSync(r),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(_t.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(o);for(i=_t.openSync(r,"r");a<s.size;){let u=_t.readSync(i,c,0,o,a);a+=u,e.write(c.slice(0,u))}e.end()}n=!1}finally{if(n&&i)try{_t.closeSync(i)}catch{}}},mm=(t,e)=>{let r=new ja(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("end",o),_t.stat(i,(c,u)=>{if(c)a(c);else{let l=new fm.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return e?s.then(e,e):s},za=t=>new ja(t)});var Xa=p((UE,Za)=>{"use strict";var gm=dt(),rn=Ur(),Va=Lt(),Ja=tn(),Ka=require("path");Za.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=gm(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?wm(n,e):n.file?vm(n,e,r):n.sync?ym(n,e):Em(n,e)};var wm=(t,e)=>{let r=new rn.Sync(t),n=new Va.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),Ya(r,e)},vm=(t,e,r)=>{let n=new rn(t),i=new Va.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return zi(n,e),r?s.then(r,r):s},Ya=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Ja({file:Ka.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},zi=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Ja({file:Ka.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>zi(t,e));t.add(r)}t.end()},ym=(t,e)=>{let r=new rn.Sync(t);return Ya(r,e),r},Em=(t,e)=>{let r=new rn(t);return zi(r,e),r}});var Gi=p((jE,sc)=>{"use strict";var xm=dt(),Qa=Ur(),V=require("fs"),ec=Lt(),tc=tn(),rc=require("path"),nc=wt();sc.exports=(t,e,r)=>{let n=xm(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?Sm(n,e):bm(n,e,r)};var Sm=(t,e)=>{let r=new Qa.Sync(t),n=!0,i,s;try{try{i=V.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=V.openSync(t.file,"w+");else throw c}let o=V.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let l=0,f=0;l<512;l+=f){if(f=V.readSync(i,a,l,a.length-l,s+l),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new nc(a);if(!c.cksumValid)break;let u=512*Math.ceil(c.size/512);if(s+u+512>o.size)break;s+=u,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,Cm(t,r,s,i,e)}finally{if(n)try{V.closeSync(i)}catch{}}},Cm=(t,e,r,n,i)=>{let s=new ec.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(s),Pm(e,i)},bm=(t,e,r)=>{e=Array.from(e);let n=new Qa(t),i=(o,a,c)=>{let u=(m,v)=>{m?V.close(o,w=>c(m)):c(null,v)},l=0;if(a===0)return u(null,0);let f=0,d=Buffer.alloc(512),h=(m,v)=>{if(m)return u(m);if(f+=v,f<512&&v)return V.read(o,d,f,d.length-f,l+f,h);if(l===0&&d[0]===31&&d[1]===139)return u(new Error("cannot append to compressed archives"));if(f<512)return u(null,l);let w=new nc(d);if(!w.cksumValid)return u(null,l);let g=512*Math.ceil(w.size/512);if(l+g+512>a||(l+=g+512,l>=a))return u(null,l);t.mtimeCache&&t.mtimeCache.set(w.path,w.mtime),f=0,V.read(o,d,0,512,l,h)};V.read(o,d,0,512,l,h)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",u=(l,f)=>{if(l&&l.code==="ENOENT"&&c==="r+")return c="w+",V.open(t.file,c,u);if(l)return a(l);V.fstat(f,(d,h)=>{if(d)return V.close(f,()=>a(d));i(f,h.size,(m,v)=>{if(m)return a(m);let w=new ec.WriteStream(t.file,{fd:f,start:v});n.pipe(w),w.on("error",a),w.on("close",o),ic(n,e)})})};V.open(t.file,c,u)});return r?s.then(r,r):s},Pm=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?tc({file:rc.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},ic=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return tc({file:rc.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>ic(t,e));t.add(r)}t.end()}});var ac=p((WE,oc)=>{"use strict";var Rm=dt(),Lm=Gi();oc.exports=(t,e,r)=>{let n=Rm(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),_m(n),Lm(n,e,r)};var _m=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var lc=p((zE,uc)=>{var{promisify:cc}=require("util"),Be=require("fs"),km=t=>{if(!t)t={mode:511,fs:Be};else if(typeof t=="object")t=S({mode:511,fs:Be},t);else if(typeof t=="number")t={mode:t,fs:Be};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Be};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Be.mkdir,t.mkdirAsync=cc(t.mkdir),t.stat=t.stat||t.fs.stat||Be.stat,t.statAsync=cc(t.stat),t.statSync=t.statSync||t.fs.statSync||Be.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Be.mkdirSync,t};uc.exports=km});var dc=p((GE,fc)=>{var Om=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:Tm,parse:Im}=require("path"),Dm=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=Tm(t),Om==="win32"){let e=/[*|"<>?:]/,{root:r}=Im(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};fc.exports=Dm});var wc=p((VE,gc)=>{var{dirname:hc}=require("path"),pc=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?pc(t,hc(e),e):void 0),mc=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?mc(t,hc(e),e):void 0}};gc.exports={findMade:pc,findMadeSync:mc}});var Ki=p((JE,yc)=>{var{dirname:vc}=require("path"),Vi=(t,e,r)=>{e.recursive=!1;let n=vc(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return Vi(n,e).then(s=>Vi(t,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(s=>{if(s.isDirectory())return r;throw i},()=>{throw i})})},Ji=(t,e,r)=>{let n=vc(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return Ji(t,e,Ji(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};yc.exports={mkdirpManual:Vi,mkdirpManualSync:Ji}});var Sc=p((KE,xc)=>{var{dirname:Ec}=require("path"),{findMade:Fm,findMadeSync:Nm}=wc(),{mkdirpManual:Am,mkdirpManualSync:$m}=Ki(),qm=(t,e)=>(e.recursive=!0,Ec(t)===t?e.mkdirAsync(t,e):Fm(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return Am(t,e);throw i}))),Bm=(t,e)=>{if(e.recursive=!0,Ec(t)===t)return e.mkdirSync(t,e);let n=Nm(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return $m(t,e);throw i}};xc.exports={mkdirpNative:qm,mkdirpNativeSync:Bm}});var Rc=p((YE,Pc)=>{var Cc=require("fs"),Mm=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Yi=Mm.replace(/^v/,"").split("."),bc=+Yi[0]>10||+Yi[0]==10&&+Yi[1]>=12,Hm=bc?t=>t.mkdir===Cc.mkdir:()=>!1,Um=bc?t=>t.mkdirSync===Cc.mkdirSync:()=>!1;Pc.exports={useNative:Hm,useNativeSync:Um}});var Ic=p((ZE,Tc)=>{var kt=lc(),Ot=dc(),{mkdirpNative:Lc,mkdirpNativeSync:_c}=Sc(),{mkdirpManual:kc,mkdirpManualSync:Oc}=Ki(),{useNative:jm,useNativeSync:Wm}=Rc(),Tt=(t,e)=>(t=Ot(t),e=kt(e),jm(e)?Lc(t,e):kc(t,e)),zm=(t,e)=>(t=Ot(t),e=kt(e),Wm(e)?_c(t,e):Oc(t,e));Tt.sync=zm;Tt.native=(t,e)=>Lc(Ot(t),kt(e));Tt.manual=(t,e)=>kc(Ot(t),kt(e));Tt.nativeSync=(t,e)=>_c(Ot(t),kt(e));Tt.manualSync=(t,e)=>Oc(Ot(t),kt(e));Tc.exports=Tt});var Bc=p((XE,qc)=>{"use strict";var ee=require("fs"),nt=require("path"),Gm=ee.lchown?"lchown":"chown",Vm=ee.lchownSync?"lchownSync":"chownSync",Dc=ee.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Fc=(t,e,r)=>{try{return ee[Vm](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},Jm=(t,e,r)=>{try{return ee.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},Km=Dc?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):ee.chown(t,e,r,n)}:(t,e,r,n)=>n,Zi=Dc?(t,e,r)=>{try{return Fc(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;Jm(t,e,r)}}:(t,e,r)=>Fc(t,e,r),Ym=process.version,Nc=(t,e,r)=>ee.readdir(t,e,r),Zm=(t,e)=>ee.readdirSync(t,e);/^v4\./.test(Ym)&&(Nc=(t,e,r)=>ee.readdir(t,r));var nn=(t,e,r,n)=>{ee[Gm](t,e,r,Km(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},Ac=(t,e,r,n,i)=>{if(typeof e=="string")return ee.lstat(nt.resolve(t,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,Ac(t,o,r,n,i)});if(e.isDirectory())Xi(nt.resolve(t,e.name),r,n,s=>{if(s)return i(s);let o=nt.resolve(t,e.name);nn(o,r,n,i)});else{let s=nt.resolve(t,e.name);nn(s,r,n,i)}},Xi=(t,e,r,n)=>{Nc(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return nn(t,e,r,n);let o=s.length,a=null,c=u=>{if(!a){if(u)return n(a=u);if(--o==0)return nn(t,e,r,n)}};s.forEach(u=>Ac(t,u,e,r,c))})},Xm=(t,e,r,n)=>{if(typeof e=="string")try{let i=ee.lstatSync(nt.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&$c(nt.resolve(t,e.name),r,n),Zi(nt.resolve(t,e.name),r,n)},$c=(t,e,r)=>{let n;try{n=Zm(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Zi(t,e,r);throw i}return n&&n.length&&n.forEach(i=>Xm(t,i,e,r)),Zi(t,e,r)};qc.exports=Xi;Xi.sync=$c});var jc=p((QE,ts)=>{"use strict";var Mc=Ic(),te=require("fs"),sn=require("path"),Hc=Bc(),ae=mt(),Qi=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},es=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},on=(t,e)=>t.get(ae(e)),rr=(t,e,r)=>t.set(ae(e),r),Qm=(t,e)=>{te.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new es(t,r&&r.code||"ENOTDIR")),e(r)})};ts.exports=(t,e,r)=>{t=ae(t);let n=e.umask,i=e.mode|448,s=(i&n)!=0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),u=e.preserve,l=e.unlink,f=e.cache,d=ae(e.cwd),h=(w,g)=>{w?r(w):(rr(f,t,!0),g&&c?Hc(g,o,a,C=>h(C)):s?te.chmod(t,i,r):r())};if(f&&on(f,t)===!0)return h();if(t===d)return Qm(t,h);if(u)return Mc(t,{mode:i}).then(w=>h(null,w),h);let v=ae(sn.relative(d,t)).split("/");an(d,v,i,f,l,d,null,h)};var an=(t,e,r,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),u=ae(sn.resolve(t+"/"+c));if(on(n,u))return an(u,e,r,n,i,s,o,a);te.mkdir(u,r,Uc(u,e,r,n,i,s,o,a))},Uc=(t,e,r,n,i,s,o,a)=>c=>{c?te.lstat(t,(u,l)=>{if(u)u.path=u.path&&ae(u.path),a(u);else if(l.isDirectory())an(t,e,r,n,i,s,o,a);else if(i)te.unlink(t,f=>{if(f)return a(f);te.mkdir(t,r,Uc(t,e,r,n,i,s,o,a))});else{if(l.isSymbolicLink())return a(new Qi(t,t+"/"+e.join("/")));a(c)}}):(o=o||t,an(t,e,r,n,i,s,o,a))},eg=t=>{let e=!1,r="ENOTDIR";try{e=te.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new es(t,r)}};ts.exports.sync=(t,e)=>{t=ae(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,u=e.unlink,l=e.cache,f=ae(e.cwd),d=w=>{rr(l,t,!0),w&&a&&Hc.sync(w,s,o),i&&te.chmodSync(t,n)};if(l&&on(l,t)===!0)return d();if(t===f)return eg(f),d();if(c)return d(Mc.sync(t,n));let m=ae(sn.relative(f,t)).split("/"),v=null;for(let w=m.shift(),g=f;w&&(g+="/"+w);w=m.shift())if(g=ae(sn.resolve(g)),!on(l,g))try{te.mkdirSync(g,n),v=v||g,rr(l,g,!0)}catch{let k=te.lstatSync(g);if(k.isDirectory()){rr(l,g,!0);continue}else if(u){te.unlinkSync(g),te.mkdirSync(g,n),v=v||g,rr(l,g,!0);continue}else if(k.isSymbolicLink())return new Qi(g,g+"/"+m.join("/"))}return d(v)}});var ns=p((ex,Wc)=>{var rs=Object.create(null),{hasOwnProperty:tg}=Object.prototype;Wc.exports=t=>(tg.call(rs,t)||(rs[t]=t.normalize("NFKD")),rs[t])});var Jc=p((tx,Vc)=>{var zc=require("assert"),rg=ns(),ng=vt(),{join:Gc}=require("path"),ig=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,sg=ig==="win32";Vc.exports=()=>{let t=new Map,e=new Map,r=u=>u.split("/").slice(0,-1).reduce((f,d)=>(f.length&&(d=Gc(f[f.length-1],d)),f.push(d||"/"),f),[]),n=new Set,i=u=>{let l=e.get(u);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(f=>t.get(f)),dirs:[...l.dirs].map(f=>t.get(f))}},s=u=>{let{paths:l,dirs:f}=i(u);return l.every(d=>d[0]===u)&&f.every(d=>d[0]instanceof Set&&d[0].has(u))},o=u=>n.has(u)||!s(u)?!1:(n.add(u),u(()=>a(u)),!0),a=u=>{if(!n.has(u))return!1;let{paths:l,dirs:f}=e.get(u),d=new Set;return l.forEach(h=>{let m=t.get(h);zc.equal(m[0],u),m.length===1?t.delete(h):(m.shift(),typeof m[0]=="function"?d.add(m[0]):m[0].forEach(v=>d.add(v)))}),f.forEach(h=>{let m=t.get(h);zc(m[0]instanceof Set),m[0].size===1&&m.length===1?t.delete(h):m[0].size===1?(m.shift(),d.add(m[0])):m[0].delete(u)}),n.delete(u),d.forEach(h=>o(h)),!0};return{check:s,reserve:(u,l)=>{u=sg?["win32 parallelization disabled"]:u.map(d=>rg(ng(Gc(d))).toLowerCase());let f=new Set(u.map(d=>r(d)).reduce((d,h)=>d.concat(h)));return e.set(l,{dirs:f,paths:u}),u.forEach(d=>{let h=t.get(d);h?h.push(l):t.set(d,[l])}),f.forEach(d=>{let h=t.get(d);h?h[h.length-1]instanceof Set?h[h.length-1].add(l):h.push(new Set([l])):t.set(d,[new Set([l])])}),o(l)}}}});var Zc=p((rx,Yc)=>{var og=process.env.__FAKE_PLATFORM__||process.platform,ag=og==="win32",cg=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:ug,O_TRUNC:lg,O_WRONLY:fg,UV_FS_O_FILEMAP:Kc=0}=cg.constants,dg=ag&&!!Kc,hg=512*1024,pg=Kc|lg|ug|fg;Yc.exports=dg?t=>t<hg?pg:"w":()=>"w"});var fs=p((nx,du)=>{"use strict";var mg=require("assert"),gg=en(),x=require("fs"),wg=Lt(),Re=require("path"),Xc=jc(),Qc=fi(),vg=Jc(),yg=di(),J=mt(),Eg=vt(),xg=ns(),eu=Symbol("onEntry"),is=Symbol("checkFs"),tu=Symbol("checkFs2"),cn=Symbol("pruneCache"),ss=Symbol("isReusable"),re=Symbol("makeFs"),os=Symbol("file"),as=Symbol("directory"),un=Symbol("link"),ru=Symbol("symlink"),nu=Symbol("hardlink"),iu=Symbol("unsupported"),su=Symbol("checkPath"),Me=Symbol("mkdir"),$=Symbol("onError"),ln=Symbol("pending"),ou=Symbol("pend"),It=Symbol("unpend"),cs=Symbol("ended"),us=Symbol("maybeClose"),ls=Symbol("skip"),nr=Symbol("doChown"),ir=Symbol("uid"),sr=Symbol("gid"),or=Symbol("checkedCwd"),au=require("crypto"),cu=Zc(),Sg=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,ar=Sg==="win32",Cg=(t,e)=>{if(!ar)return x.unlink(t,e);let r=t+".DELETE."+au.randomBytes(16).toString("hex");x.rename(t,r,n=>{if(n)return e(n);x.unlink(r,e)})},bg=t=>{if(!ar)return x.unlinkSync(t);let e=t+".DELETE."+au.randomBytes(16).toString("hex");x.renameSync(t,e),x.unlinkSync(e)},uu=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,lu=t=>xg(Eg(J(t))).toLowerCase(),Pg=(t,e)=>{e=lu(e);for(let r of t.keys()){let n=lu(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},Rg=t=>{for(let e of t.keys())t.delete(e)},fn=class extends gg{constructor(e){e||(e={}),e.ondone=r=>{this[cs]=!0,this[us]()};super(e);if(this[or]=!1,this.reservations=vg(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[ln]=0,this[cs]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||ar,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=J(Re.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[eu](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[us](){this[cs]&&this[ln]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[su](e){if(this.strip){let r=J(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=J(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=J(e.path),n=r.split("/");if(n.includes("..")||ar&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,s]=yg(r);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(Re.isAbsolute(e.path)?e.absolute=J(Re.resolve(e.path)):e.absolute=J(Re.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:J(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Re.win32.parse(e.absolute);e.absolute=r+Qc.encode(e.absolute.substr(r.length));let{root:n}=Re.win32.parse(e.path);e.path=n+Qc.encode(e.path.substr(n.length))}return!0}[eu](e){if(!this[su](e))return e.resume();switch(mg.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[is](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[iu](e)}}[$](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[It](),r.resume())}[Me](e,r,n){Xc(J(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[nr](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ir](e){return uu(this.uid,e.uid,this.processUid)}[sr](e){return uu(this.gid,e.gid,this.processGid)}[os](e,r){let n=e.mode&4095||this.fmode,i=new wg.WriteStream(e.absolute,{flags:cu(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&x.close(i.fd,()=>{}),i.write=()=>!0,this[$](c,e),r()});let s=1,o=c=>{if(c){i.fd&&x.close(i.fd,()=>{}),this[$](c,e),r();return}--s==0&&x.close(i.fd,u=>{u?this[$](u,e):this[It](),r()})};i.on("finish",c=>{let u=e.absolute,l=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,d=e.mtime;x.futimes(l,f,d,h=>h?x.utimes(u,f,d,m=>o(m&&h)):o())}if(this[nr](e)){s++;let f=this[ir](e),d=this[sr](e);x.fchown(l,f,d,h=>h?x.chown(u,f,d,m=>o(m&&h)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[$](c,e),r()}),e.pipe(a)),a.pipe(i)}[as](e,r){let n=e.mode&4095||this.dmode;this[Me](e.absolute,n,i=>{if(i){this[$](i,e),r();return}let s=1,o=a=>{--s==0&&(r(),this[It](),e.resume())};e.mtime&&!this.noMtime&&(s++,x.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[nr](e)&&(s++,x.chown(e.absolute,this[ir](e),this[sr](e),o)),o()})}[iu](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[ru](e,r){this[un](e,e.linkpath,"symlink",r)}[nu](e,r){let n=J(Re.resolve(this.cwd,e.linkpath));this[un](e,n,"link",r)}[ou](){this[ln]++}[It](){this[ln]--,this[us]()}[ls](e){this[It](),e.resume()}[ss](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!ar}[is](e){this[ou]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[tu](e,n))}[cn](e){e.type==="SymbolicLink"?Rg(this.dirCache):e.type!=="Directory"&&Pg(this.dirCache,e.absolute)}[tu](e,r){this[cn](e);let n=a=>{this[cn](e),r(a)},i=()=>{this[Me](this.cwd,this.dmode,a=>{if(a){this[$](a,e),n();return}this[or]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=J(Re.dirname(e.absolute));if(a!==this.cwd)return this[Me](a,this.dmode,c=>{if(c){this[$](c,e),n();return}o()})}o()},o=()=>{x.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[ls](e),n();return}if(a||this[ss](e,c))return this[re](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let u=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,l=f=>this[re](f,e,n);return u?x.chmod(e.absolute,e.mode,l):l()}if(e.absolute!==this.cwd)return x.rmdir(e.absolute,u=>this[re](u,e,n))}if(e.absolute===this.cwd)return this[re](null,e,n);Cg(e.absolute,u=>this[re](u,e,n))})};this[or]?s():i()}[re](e,r,n){if(e){this[$](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[os](r,n);case"Link":return this[nu](r,n);case"SymbolicLink":return this[ru](r,n);case"Directory":case"GNUDumpDir":return this[as](r,n)}}[un](e,r,n,i){x[n](r,e.absolute,s=>{s?this[$](s,e):(this[It](),e.resume()),i()})}},dn=t=>{try{return[null,t()]}catch(e){return[e,null]}},fu=class extends fn{[re](e,r){return super[re](e,r,()=>{})}[is](e){if(this[cn](e),!this[or]){let s=this[Me](this.cwd,this.dmode);if(s)return this[$](s,e);this[or]=!0}if(e.absolute!==this.cwd){let s=J(Re.dirname(e.absolute));if(s!==this.cwd){let o=this[Me](s,this.dmode);if(o)return this[$](o,e)}}let[r,n]=dn(()=>x.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[ls](e);if(r||this[ss](e,n))return this[re](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?dn(()=>{x.chmodSync(e.absolute,e.mode)}):[];return this[re](a,e)}let[s]=dn(()=>x.rmdirSync(e.absolute));this[re](s,e)}let[i]=e.absolute===this.cwd?[]:dn(()=>bg(e.absolute));this[re](i,e)}[os](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{x.closeSync(s)}catch(u){c=u}(a||c)&&this[$](a||c,e),r()},s;try{s=x.openSync(e.absolute,cu(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[$](a,e)),e.pipe(o)),o.on("data",a=>{try{x.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let u=e.atime||new Date,l=e.mtime;try{x.futimesSync(s,u,l)}catch(f){try{x.utimesSync(e.absolute,u,l)}catch{c=f}}}if(this[nr](e)){let u=this[ir](e),l=this[sr](e);try{x.fchownSync(s,u,l)}catch(f){try{x.chownSync(e.absolute,u,l)}catch{c=c||f}}}i(c)})}[as](e,r){let n=e.mode&4095||this.dmode,i=this[Me](e.absolute,n);if(i){this[$](i,e),r();return}if(e.mtime&&!this.noMtime)try{x.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[nr](e))try{x.chownSync(e.absolute,this[ir](e),this[sr](e))}catch{}r(),e.resume()}[Me](e,r){try{return Xc.sync(J(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[un](e,r,n,i){try{x[n+"Sync"](r,e.absolute),i(),e.resume()}catch(s){return this[$](s,e)}}};fn.Sync=fu;du.exports=fn});var wu=p((ix,gu)=>{"use strict";var Lg=dt(),hn=fs(),hu=require("fs"),pu=Lt(),mu=require("path"),ds=vt();gu.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=Lg(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&_g(n,e),n.file&&n.sync?kg(n):n.file?Og(n,r):n.sync?Tg(n):Ig(n)};var _g=(t,e)=>{let r=new Map(e.map(s=>[ds(s),!0])),n=t.filter,i=(s,o)=>{let a=o||mu.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(mu.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(ds(s)):s=>i(ds(s))},kg=t=>{let e=new hn.Sync(t),r=t.file,n=hu.statSync(r),i=t.maxReadSize||16*1024*1024;new pu.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},Og=(t,e)=>{let r=new hn(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("close",o),hu.stat(i,(c,u)=>{if(c)a(c);else{let l=new pu.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return e?s.then(e,e):s},Tg=t=>new hn.Sync(t),Ig=t=>new hn(t)});var hs=p(_=>{"use strict";_.c=_.create=Xa();_.r=_.replace=Gi();_.t=_.list=tn();_.u=_.update=ac();_.x=_.extract=wu();_.Pack=Ur();_.Unpack=fs();_.Parse=en();_.ReadEntry=Pr();_.WriteEntry=xi();_.Header=wt();_.Pax=_r();_.types=si()});var ps=p((ox,vu)=>{vu.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var pn=p((ax,Eu)=>{"use strict";var yu=ps();Eu.exports=function(e,r){if(!e)return function(i,s){return i?yu(s,i,r):s(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,s){if(i)return yu(s,i,r);n>=e.length?s(!0):s(null,e[n++])}}});var Su=p((cx,xu)=>{"use strict";var Dg=pn();xu.exports=function(t){return Dg(Object.keys(t))}});var ms=p((ux,Cu)=>{"use strict";var Fg=ps();Cu.exports=function(e,r){return function(n,i){if(n)return Fg(i,n,r);if(e!=null){var s=e;e=null,i(null,s)}else i(!0)}}});var Pu=p((lx,bu)=>{"use strict";bu.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var Lu=p((fx,Ru)=>{"use strict";Ru.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var ku=p((dx,_u)=>{"use strict";_u.exports=function(){return function(e,r){r(!0)}}});var Tu=p((hx,Ou)=>{"use strict";Ou.exports=function(e){return function(r,n){n(e)}}});var Du=p((px,Iu)=>{"use strict";Iu.exports={keys:Su(),once:ms(),values:pn(),count:Pu(),infinite:Lu(),empty:ku(),error:Tu()}});var Dt=p((mx,Fu)=>{"use strict";Fu.exports=function(e,r){var n,i;function s(o){if(n=o,i)return s.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,f){if(u=!0,l=l||i){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else e&&e(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return s.abort=function(o,a){if(typeof o=="function"&&(a=o,o=!0),i=o||!0,n)return n(i,a||function(){})},s}});var Au=p((gx,Nu)=>{"use strict";var Ng=Dt();Nu.exports=function(e){return Ng(null,e)}});var qu=p((wx,$u)=>{"use strict";var Ag=Dt();$u.exports=function(e){return Ag(function(r){console.log(r)},e)}});var Ft=p((vx,Bu)=>{Bu.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var Uu=p((yx,Hu)=>{"use strict";function Mu(t){return t}var $g=Ft(),qg=Dt();Hu.exports=function(e,r){var n=!1;return r?e=$g(e)||Mu:(r=e,e=Mu),qg(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var mn=p((Ex,ju)=>{"use strict";var Bg=Dt();ju.exports=function(e,r,n){n||(n=r,r=null);var i=Bg(function(s){r=e(r,s)},function(s){n(s,r)});return arguments.length===2?function(s){s(null,function(o,a){if(o)return n(o===!0?null:o);r=a,i(s)})}:i}});var zu=p((xx,Wu)=>{"use strict";var Mg=mn();Wu.exports=function(e){return Mg(function(r,n){return r.push(n),r},[],e)}});var Vu=p((Sx,Gu)=>{"use strict";var Hg=mn();Gu.exports=function(e){return Hg(function(r,n){return r+n},"",e)}});var Ku=p((Cx,Ju)=>{"use strict";Ju.exports={drain:Dt(),onEnd:Au(),log:qu(),find:Uu(),reduce:mn(),collect:zu(),concat:Vu()}});var Zu=p((bx,Yu)=>{"use strict";function Ug(t){return t}var jg=Ft();Yu.exports=function(e){return e?(e=jg(e),function(r){return function(n,i){r(n,function(s,o){try{o=s?null:e(o)}catch(a){return r(a,function(){return i(a)})}i(s,o)})}}):Ug}});var Qu=p((Px,Xu)=>{"use strict";function Wg(t){return t}var zg=Ft();Xu.exports=function(e){if(!e)return Wg;e=zg(e);var r=!1,n,i;return function(s){return function o(a,c){if(i)return c(i);a?(i=a,r?s(a,function(u){r?n=c:c(a)}):s(a,function(u){c(a)})):s(null,function(u,l){u?c(u):i?c(i):(r=!0,e(l,function(f,d){r=!1,i?(c(i),n&&n(i)):f?o(f,c):c(null,d)}))})}}}});var gs=p((Rx,el)=>{var Gg=Ft();function Vg(t){return t}el.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:Gg(e)||Vg}});var gn=p((Lx,tl)=>{"use strict";var Jg=gs();tl.exports=function(e){return e=Jg(e),function(r){return function n(i,s){for(var o,a=!0;a;)a=!1,o=!0,r(i,function(c,u){if(!c&&!e(u))return o?a=!0:n(c,s);s(c,u)}),o=!1}}}});var nl=p((_x,rl)=>{"use strict";var Kg=gs(),Yg=gn();rl.exports=function(e){return e=Kg(e),Yg(function(r){return!e(r)})}});var sl=p((kx,il)=>{"use strict";il.exports=function(e,r){var n=!1;function i(s){n||!r||(n=!0,r(s===!0?null:s))}return function(s){return function(o,a){return o&&i(o),s(o,function(c,u){c?i(c):e&&e(u),a(c,u)})}}}});var al=p((Ox,ol)=>{"use strict";ol.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var s=e;e=function(){return--s}}return function(o){function a(c){o(!0,function(u){n=!1,c(u||!0)})}return function(c,u){i&&!c?n?a(u):u(i):(i=c)?o(i,u):o(null,function(l,f){(i=i||l)?u(i):e(f)?u(null,f):(i=!0,n?u(null,f):a(u))})}}}});var ws=p((Tx,cl)=>{"use strict";function Zg(t){return t}var Xg=Ft(),Qg=gn();cl.exports=function(e,r){e=Xg(e)||Zg;var n={};return Qg(function(i){var s=e(i);return n[s]?!!r:(n[s]=!0,!r)})}});var ll=p((Ix,ul)=>{"use strict";var ew=ws();ul.exports=function(e){return ew(e,!0)}});var dl=p((Dx,fl)=>{"use strict";var tw=pn(),rw=ms();fl.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?s():o();function s(){r(null,function(a,c){a===!0?o():a?e(!0,function(u){i(a)}):i(null,c)})}function o(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=tw(c):typeof c!="function"&&(c=rw(c)),r=c,s()})}}}}});var pl=p((Fx,hl)=>{"use strict";hl.exports={map:Zu(),asyncMap:Qu(),filter:gn(),filterNot:nl(),through:sl(),take:al(),unique:ws(),nonUnique:ll(),flatten:dl()}});var vs=p((Nx,ml)=>{"use strict";ml.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<r;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var wn=p((it,yl)=>{"use strict";var gl=Du(),wl=Ku(),vl=pl();it=yl.exports=vs();it.pull=it;for(ce in gl)it[ce]=gl[ce];var ce;for(ce in vl)it[ce]=vl[ce];var ce;for(ce in wl)it[ce]=wl[ce];var ce});var Sl=p((Hx,xl)=>{var At=1e3,$t=At*60,qt=$t*60,st=qt*24,sw=st*7,ow=st*365.25;xl.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return aw(t);if(r==="number"&&isFinite(t))return e.long?uw(t):cw(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function aw(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ow;case"weeks":case"week":case"w":return r*sw;case"days":case"day":case"d":return r*st;case"hours":case"hour":case"hrs":case"hr":case"h":return r*qt;case"minutes":case"minute":case"mins":case"min":case"m":return r*$t;case"seconds":case"second":case"secs":case"sec":case"s":return r*At;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function cw(t){var e=Math.abs(t);return e>=st?Math.round(t/st)+"d":e>=qt?Math.round(t/qt)+"h":e>=$t?Math.round(t/$t)+"m":e>=At?Math.round(t/At)+"s":t+"ms"}function uw(t){var e=Math.abs(t);return e>=st?vn(t,e,st,"day"):e>=qt?vn(t,e,qt,"hour"):e>=$t?vn(t,e,$t,"minute"):e>=At?vn(t,e,At,"second"):t+" ms"}function vn(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var xs=p((Ux,Cl)=>{function lw(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Sl(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let d=0;d<l.length;d++)f=(f<<5)-f+l.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,d=null;function h(...m){if(!h.enabled)return;let v=h,w=Number(new Date),g=w-(f||w);v.diff=g,v.prev=f,v.curr=w,f=w,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let C=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(M,je)=>{if(M==="%%")return"%";C++;let W=r.formatters[je];if(typeof W=="function"){let de=m[C];M=W.call(v,de),m.splice(C,1),C--}return M}),r.formatArgs.call(v,m),(v.log||r.log).apply(v,m)}return h.namespace=l,h.useColors=r.useColors(),h.color=r.selectColor(l),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>d===null?r.enabled(l):d,set:m=>{d=m}}),typeof r.init=="function"&&r.init(h),h}function n(l,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+l);return d.log=this.log,d}function i(l){r.save(l),r.names=[],r.skips=[];let f,d=(typeof l=="string"?l:"").split(/[\s,]+/),h=d.length;for(f=0;f<h;f++)!d[f]||(l=d[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(l))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Cl.exports=lw});var bl=p((K,yn)=>{K.formatArgs=dw;K.save=hw;K.load=pw;K.useColors=fw;K.storage=mw();K.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();K.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function fw(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function dw(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+yn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}K.log=console.debug||console.log||(()=>{});function hw(t){try{t?K.storage.setItem("debug",t):K.storage.removeItem("debug")}catch{}}function pw(){let t;try{t=K.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function mw(){try{return localStorage}catch{}}yn.exports=xs()(K);var{formatters:gw}=yn.exports;gw.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Rl=p((jx,Pl)=>{"use strict";Pl.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var kl=p((Wx,_l)=>{"use strict";var ww=require("os"),Ll=require("tty"),ne=Rl(),{env:T}=process,He;ne("no-color")||ne("no-colors")||ne("color=false")||ne("color=never")?He=0:(ne("color")||ne("colors")||ne("color=true")||ne("color=always"))&&(He=1);"FORCE_COLOR"in T&&(T.FORCE_COLOR==="true"?He=1:T.FORCE_COLOR==="false"?He=0:He=T.FORCE_COLOR.length===0?1:Math.min(parseInt(T.FORCE_COLOR,10),3));function Ss(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Cs(t,e){if(He===0)return 0;if(ne("color=16m")||ne("color=full")||ne("color=truecolor"))return 3;if(ne("color=256"))return 2;if(t&&!e&&He===void 0)return 0;let r=He||0;if(T.TERM==="dumb")return r;if(process.platform==="win32"){let n=ww.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in T)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in T)||T.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in T)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if(T.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in T){let n=parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:r}function vw(t){let e=Cs(t,t&&t.isTTY);return Ss(e)}_l.exports={supportsColor:vw,stdout:Ss(Cs(!0,Ll.isatty(1))),stderr:Ss(Cs(!0,Ll.isatty(2)))}});var Tl=p((D,xn)=>{var yw=require("tty"),En=require("util");D.init=Rw;D.log=Cw;D.formatArgs=xw;D.save=bw;D.load=Pw;D.useColors=Ew;D.destroy=En.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");D.colors=[6,2,3,4,5,1];try{let t=kl();t&&(t.stderr||t).level>=2&&(D.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}D.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Ew(){return"colors"in D.inspectOpts?Boolean(D.inspectOpts.colors):yw.isatty(process.stderr.fd)}function xw(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} [0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+xn.exports.humanize(this.diff)+"[0m")}else t[0]=Sw()+e+" "+t[0]}function Sw(){return D.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Cw(...t){return process.stderr.write(En.format(...t)+`
`)}function bw(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Pw(){return process.env.DEBUG}function Rw(t){t.inspectOpts={};let e=Object.keys(D.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=D.inspectOpts[e[r]]}xn.exports=xs()(D);var{formatters:Ol}=xn.exports;Ol.o=function(t){return this.inspectOpts.colors=this.useColors,En.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Ol.O=function(t){return this.inspectOpts.colors=this.useColors,En.inspect(t,this.inspectOpts)}});var Il=p((zx,bs)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?bs.exports=bl():bs.exports=Tl()});var Fl=p((Gx,Dl)=>{var cr;Dl.exports=function(){if(!cr){try{cr=Il()("follow-redirects")}catch{}typeof cr!="function"&&(cr=function(){})}cr.apply(null,arguments)}});var Hl=p((Vx,_s)=>{var ot=require("url"),Ps=ot.URL,Lw=require("http"),_w=require("https"),Nl=require("stream").Writable,kw=require("assert"),Al=Fl(),at=["abort","aborted","connect","error","socket","timeout"],Rs=Object.create(null);at.forEach(function(t){Rs[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var $l=Sn("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Ow=Sn("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Tw=Sn("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Iw=Sn("ERR_STREAM_WRITE_AFTER_END","write after end");function Y(t,e){Nl.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Y.prototype=Object.create(Nl.prototype);Y.prototype.abort=function(){Ml(this._currentRequest),this.emit("abort")};Y.prototype.write=function(t,e,r){if(this._ending)throw new Iw;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Tw),this.abort())};Y.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Y.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Y.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Y.prototype.setTimeout=function(t,e){var r=this;function n(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},t),n(o)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Y.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Y.prototype,t,{get:function(){return this._currentRequest[t]}})});Y.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Y.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=ot.format(this._options),n._redirectable=this;for(var i=0;i<at.length;i++)n.on(at[i],Rs[at[i]]);if(this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(u){if(n===o._currentRequest)if(u)o.emit("error",u);else if(s<a.length){var l=a[s++];n.finished||n.write(l.data,l.encoding,c)}else o._ended&&n.end()})()}};Y.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(Ml(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Ow);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Ls(/^content-/i,this._options.headers));var n=Ls(/^host$/i,this._options.headers),i=ot.parse(this._currentUrl),s=n||i.host,o=/^\w+:/.test(r)?this._currentUrl:ot.format(Object.assign(i,{host:s})),a;try{a=ot.resolve(o,r)}catch(l){this.emit("error",new $l(l));return}Al("redirecting to",a),this._isRedirect=!0;var c=ot.parse(a);if(Object.assign(this._options,c),(c.protocol!==i.protocol||!Fw(c.host,s))&&Ls(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var u={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,u)}catch(l){this.emit("error",l);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(l){this.emit("error",new $l(l))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function ql(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",s=r[i]=t[n],o=e[n]=Object.create(s);function a(u,l,f){if(typeof u=="string"){var d=u;try{u=Bl(new Ps(d))}catch{u=ot.parse(d)}}else Ps&&u instanceof Ps?u=Bl(u):(f=l,l=u,u={protocol:i});return typeof l=="function"&&(f=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},u,l),l.nativeProtocols=r,kw.equal(l.protocol,i,"protocol mismatch"),Al("options",l),new Y(l,f)}function c(u,l,f){var d=o.request(u,l,f);return d.end(),d}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function Dw(){}function Bl(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Ls(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function Sn(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function Ml(t){for(var e=0;e<at.length;e++)t.removeListener(at[e],Rs[at[e]]);t.on("error",Dw),t.abort()}function Fw(t,e){if(t===e)return!0;let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}_s.exports=ql({http:Lw,https:_w});_s.exports.wrap=ql});var ks=p((tS,Wl)=>{"use strict";var Ul=require("child_process"),Aw=1024*1024,jl={exec(t,e){Ul.exec(t,{maxBuffer:2*Aw,windowsHide:!0},e)},spawn(t,e,r){return Ul.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(s=>{let o=jl.split(s,r),a=[];e.forEach(c=>{a.push(o[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let i=r[n];i.startsWith(" ")?(r[n-1]+=i.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(i=>{let s=i.indexOf(":"),o=i.slice(0,s).trim();n[o]=i.slice(s+1).trim()}),n})}};Wl.exports=jl});var Gl=p((rS,zl)=>{"use strict";var $w=require("os"),Cn=require("fs"),ie=ks(),qw=t=>new Promise((e,r)=>{Cn.existsSync(t)?e():Cn.mkdir(t,n=>{n?r(n):e()})}),Os={darwin(t){return new Promise((e,r)=>{ie.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,s){if(n)r(n);else{if(n=s.toString().trim(),n){r(n);return}let o=ie.stripLine(i.toString(),2),a=ie.extractColumns(o,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let u=String(c[1]).match(/\.(\d+)$/);if(u&&u[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";ie.exec(n,function(i,s,o){if(i)r(i);else{let a=o.toString().trim();a&&console.warn(a);let c=ie.stripLine(s.toString(),2),u=ie.extractColumns(c,[3,6],7).find(l=>{let f=String(l[0]).match(/:(\d+)$/);if(f&&f[1]===String(t))return!0});if(u&&u[1]){let l=u[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{ie.exec("netstat -ano",function(n,i,s){if(n)r(n);else{if(n=s.toString().trim(),n){r(n);return}let o=ie.stripLine(i.toString(),4),a=ie.extractColumns(o,[1,4],5).find(c=>{let u=String(c[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=$w.tmpdir()+"/.find-process",i=n+"/"+process.pid,s='netstat -tunp >> "'+i+'"';qw(n).then(()=>{ie.exec(s,()=>{Cn.readFile(i,"utf8",(o,a)=>{if(Cn.unlink(i,()=>{}),o)r(o);else{a=ie.stripLine(a,2);let c=ie.extractColumns(a,[3,6],7).find(u=>{let l=String(u[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});if(c&&c[1]){let u=c[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function Bw(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Os))return n(new Error(`platform ${e} is unsupported`));let i=Os[e];typeof i=="string"&&(i=Os[i]),i(t).then(r,n)})}zl.exports=Bw});var Yl=p((nS,Kl)=>{"use strict";var bn=require("path"),Ue=ks();function Ts(t,e){return e?t&&t.match?t.match(e):!1:!0}function Vl(t){let e=t.split(bn.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let s=i.indexOf(" -");if(s>=0){n.push(i.substring(0,s).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(bn.sep)}function Jl(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return bn.basename(t.substring(0,e))}return bn.basename(t)}var Is={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",Ue.exec(n,function(i,s,o){if(i)"pid"in t?e([]):r(i);else{if(i=o.toString().trim(),i){r(i);return}let a=Ue.stripLine(s.toString(),1),u=Ue.extractColumns(a,[0,1,2,3,4],5).filter(l=>l[0]&&t.pid?l[0]===String(t.pid):l[4]&&t.name?Ts(l[4],t.name):!!l[0]).map(l=>{let f=String(l[4]),d=Vl(f);return{pid:parseInt(l[0],10),ppid:parseInt(l[1],10),uid:parseInt(l[2],10),gid:parseInt(l[3],10),name:Jl(d),bin:d,cmd:l[4]}});t.strict&&t.name&&(u=u.filter(l=>l.name===t.name)),e(u)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],s=Ue.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});s.stdout.on("data",o=>{i.push(o.toString())}),s.on("close",o=>{if(o!==0)return r(new Error("Command '"+n+"' terminated with code: "+o));let a=Ue.parseTable(i.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let u=c.Name||"";return t.strict?u===t.name||u.endsWith(".exe")&&u.slice(0,-4)===t.name:Ts(c.CommandLine||u,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";Ue.exec(n,function(i,s,o){if(i)"pid"in t?e([]):r(i);else{if(i=o.toString().trim(),i){r(i);return}let a=Ue.stripLine(s.toString(),1),u=Ue.extractColumns(a,[0,3],4).filter(l=>l[0]&&t.pid?l[0]===String(t.pid):l[1]&&t.name?Ts(l[1],t.name):!!l[0]).map(l=>{let f=String(l[1]),d=Vl(f);return{pid:parseInt(l[0],10),name:Jl(d),bin:d,cmd:f}});t.strict&&t.name&&(u=u.filter(l=>l.name===t.name)),e(u)}})})}};function Mw(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Is))return n(new Error(`platform ${e} is unsupported`));let i=Is[e];typeof i=="string"&&(i=Is[i]),i(t).then(r,n)})}Kl.exports=Mw});var Ql=p((iS,Xl)=>{"use strict";var Hw=Gl(),Zl=Yl(),Ds={port(t,e){return Hw(t,e).then(r=>Ds.pid(r,e),()=>[])},pid(t,e){return Zl({pid:t,strict:e})},name(t,e){return Zl({name:t,strict:e})}};function Uw(t,e,r){return new Promise((n,i)=>{if(!(t in Ds))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(e);t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):Ds[t](e,r).then(n,i)}})}Xl.exports=Uw});var tf=p((sS,ef)=>{"use strict";ef.exports=Ql()});var Ns=p((EC,cf)=>{var yC=cf.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var lf=p((xC,uf)=>{var nv=Ns();uf.exports=function(t,e){return function(r){var n=[],i,s;function o(u){n.push(u)}t=t||function(u){this.queue(u)},e=e||function(){this.queue(null)};var a={emit:function(u,l){u=="data"&&o(l),u=="end"&&(i=!0,o(null)),u=="error"&&(s=l)},queue:o},c;return function(u,l){if(i=i||u,u)return r(u,function(){if(c){var f=c;c=null,f(u)}l(u)});c=l,nv(function f(d){if(!!c)if(l=c,s)c=null,l(s);else if(n.length){var h=n.shift();c=null,l(h===null,h)}else r(i,function(m,v){if(m&&m!==!0)return s=m,d();if(i=i||m)e.call(a);else if(v!==null&&(t.call(a,v),s||i))return r(s||i,function(){c=null,l(s||i)});d(f)})})}}}});var df=p((SC,ff)=>{ff.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var s=t;return t=[],s.length==1?s[0]:Buffer.concat(s)}else if(t.length>1&&n<=(i=t[0].length)){var o=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,o}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var u=t.shift();c+=u.length,a.push(u)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var gf=p((CC,mf)=>{"use strict";var iv=df();function sv(t){return Number.isFinite(t)}function hf(t){return typeof t=="function"}function pf(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(s,o){clearTimeout(i),n(s,o)})}:t}mf.exports=function(t){var e=[],r,n,i=!1,s=iv(),o,a,c;function u(){for(;e.length;)if(e[0].length==null&&s.has(1))e.shift().cb(null,s.get());else if(s.has(e[0].length)){var d=e.shift();d.cb(null,s.get(d.length))}else if(o==!0&&e[0].length&&s.length<e[0].length){var h="stream ended with:"+s.length+" but wanted:"+e[0].length;e.shift().cb(new Error(h))}else if(o)e.shift().cb(o);else return!!e.length;return e.length||!s.has(1)||c}function l(){var d=u();d&&!i&&r&&!i&&!a&&(i=!0,n(null,function(h,m){if(i=!1,h)return o=h,u();s.add(m),l()}))}function f(d){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=pf(d,t),r=d,l()}return f.abort=function(d,h){c=d||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);h&&h(c)})):h()},f.read=function(d,h,m){if(hf(h)&&(m=h,h=t),hf(m))e.push({length:sv(d)?d:null,cb:m}),l();else return a=!0,function(v,w){if(i||s.has(1)){if(v)return r(v,w);e.push({length:null,cb:w}),l()}else pf(r,h)(v,function(g,C){w(g,C)})}},f}});var _f=p((ct,Lf)=>{var ov=lf(),av=gf(),wf=0,vf=1,yf=2,Ef="GOODBYE",cv=Buffer.isBuffer;function xf(t){return typeof t=="string"}function Sf(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return xf(t)&&t===Ef?(e.fill(0),[e,null]):(xf(n)?(r=vf,n=Buffer.from(n,"utf-8")):cv(n)?r=wf:(r=yf,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function Cf(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function bf(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(wf===e.type)e.value=t;else if(vf===e.type)e.value=t.toString();else if(yf===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function Pf(){return ov(function(t){var e=Sf(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function Rf(){var t=av(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(s,o){if(s)return i(s);var a=Cf(o);if(a.length===0)return e=!0,i(null,Ef);t.read(a.length,function(c,u){if(c)return i(c);try{bf(u,a)}catch(l){return i(l)}i(null,a)})})}}}ct=Lf.exports=function(t){return{source:Pf()(t.source),sink:function(e){return t.sink(Rf()(e))}}};ct.encodePair=Sf;ct.decodeHead=Cf;ct.decodeBody=bf;ct.encode=Pf;ct.decode=Rf});var Tf=p((bC,Of)=>{function lr(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}Of.exports=function(t){return new se(t)};function se(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}se.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};se.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,s){delete n._requests[r],e(i,s),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};se.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new fr(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};se.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};se.prototype.destroy=function(t){t=t||lr(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};se.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=kf)};function kf(t){console.error("packet-stream asked to read after closed",t)}se.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};se.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};se.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};se.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(s,o){if(r)throw new Error("cb called twice from local api");r=!0,s?n.read({value:lr(s),end:!0,req:e}):n.read({value:o,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:lr(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};se.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new fr(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function fr(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}fr.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:lr(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};fr.prototype.end=function(t){this.write(null,lr(t||!0))};fr.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=kf,this._ps=null)}});var Df=p((PC,dr)=>{"use strict";var uv=wn();function lv(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function As(t,e){let r=[],n=!1,i=!1,s,o,a=lv((c,u)=>{e&&e(c,u),t=null,e=null,s=null,o&&o(c||!0,()=>{})});return t.read=function(c,u){if(n=n||u,s){let l=s;s=null,l(n,c)}else!n&&!i&&r.push(c);n&&a(n!==!0?n:null)},{source(c,u){c?(t&&t.write(null,c),u(c),r.length=0,i=!0,a(c!==!0?c:null)):r.length?u(null,r.shift()):n?u(n):s=u},sink(c){if(n)return o=null,c(n,()=>{});o=c,uv.drain(u=>{if(n)return!1;t.write(u)},u=>{t&&!t.writeEnd&&t.write(null,u||!0),a&&a(u)})(c)}}}function If(t,e){return As(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function fv(t){return If(t).source}function dv(t,e){return If(t,e).sink}dr.exports=As;dr.exports.source=fv;dr.exports.sink=dv;dr.exports.duplex=As});var Nf=p((RC,Ff)=>{Ff.exports=function(e){var r,n,i;function s(o){return function(a,c){o(a,function(u,l){if(u&&!i)return i=!0,c(null,e);u&&r?c(u):u?n=c:c(null,l)})}}return s.end=function(){return r=!0,n&&n(r),s},s}});var $s=p((LC,Af)=>{Af.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Rn=p((_C,qf)=>{"use strict";var $f=$s();qf.exports=function(e,r){if(!e)return function(i,s){return i?$f(s,i,r):s(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,s){if(i)return $f(s,i,r);n>=e.length?s(!0):s(null,e[n++])}}});var Mf=p((kC,Bf)=>{"use strict";var hv=Rn();Bf.exports=function(t){return hv(Object.keys(t))}});var qs=p((OC,Hf)=>{"use strict";var pv=$s();Hf.exports=function(e,r){return function(n,i){if(n)return pv(i,n,r);if(e!=null){var s=e;e=null,i(null,s)}else i(!0)}}});var jf=p((TC,Uf)=>{"use strict";Uf.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var zf=p((IC,Wf)=>{"use strict";Wf.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var Vf=p((DC,Gf)=>{"use strict";Gf.exports=function(){return function(e,r){r(!0)}}});var Kf=p((FC,Jf)=>{"use strict";Jf.exports=function(e){return function(r,n){n(e)}}});var Zf=p((NC,Yf)=>{"use strict";Yf.exports={keys:Mf(),once:qs(),values:Rn(),count:jf(),infinite:zf(),empty:Vf(),error:Kf()}});var Bt=p((AC,Xf)=>{"use strict";Xf.exports=function(e,r){var n,i;function s(o){if(n=o,i)return s.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,f){if(u=!0,l=l||i){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else e&&e(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return s.abort=function(o,a){if(typeof o=="function"&&(a=o,o=!0),i=o||!0,n)return n(i,a||function(){})},s}});var ed=p(($C,Qf)=>{"use strict";var mv=Bt();Qf.exports=function(e){return mv(null,e)}});var rd=p((qC,td)=>{"use strict";var gv=Bt();td.exports=function(e){return gv(function(r){console.log(r)},e)}});var Mt=p((BC,nd)=>{nd.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var od=p((MC,sd)=>{"use strict";function id(t){return t}var wv=Mt(),vv=Bt();sd.exports=function(e,r){var n=!1;return r?e=wv(e)||id:(r=e,e=id),vv(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var Ln=p((HC,ad)=>{"use strict";var yv=Bt();ad.exports=function(e,r,n){n||(n=r,r=null);var i=yv(function(s){r=e(r,s)},function(s){n(s,r)});return arguments.length===2?function(s){s(null,function(o,a){if(o)return n(o===!0?null:o);r=a,i(s)})}:i}});var ud=p((UC,cd)=>{"use strict";var Ev=Ln();cd.exports=function(e){return Ev(function(r,n){return r.push(n),r},[],e)}});var fd=p((jC,ld)=>{"use strict";var xv=Ln();ld.exports=function(e){return xv(function(r,n){return r+n},"",e)}});var hd=p((WC,dd)=>{"use strict";dd.exports={drain:Bt(),onEnd:ed(),log:rd(),find:od(),reduce:Ln(),collect:ud(),concat:fd()}});var md=p((zC,pd)=>{"use strict";function Sv(t){return t}var Cv=Mt();pd.exports=function(e){return e?(e=Cv(e),function(r){return function(n,i){r(n,function(s,o){try{o=s?null:e(o)}catch(a){return r(a,function(){return i(a)})}i(s,o)})}}):Sv}});var wd=p((GC,gd)=>{"use strict";function bv(t){return t}var Pv=Mt();gd.exports=function(e){if(!e)return bv;e=Pv(e);var r=!1,n,i;return function(s){return function o(a,c){if(i)return c(i);a?(i=a,r?s(a,function(){r?n=c:c(a)}):s(a,c)):s(null,function(u,l){u?c(u):i?c(i):(r=!0,e(l,function(f,d){r=!1,i?(c(i),n(i)):f?o(f,c):c(null,d)}))})}}}});var Bs=p((VC,vd)=>{var Rv=Mt();function Lv(t){return t}vd.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:Rv(e)||Lv}});var _n=p((JC,yd)=>{"use strict";var _v=Bs();yd.exports=function(e){return e=_v(e),function(r){return function n(i,s){for(var o,a=!0;a;)a=!1,o=!0,r(i,function(c,u){if(!c&&!e(u))return o?a=!0:n(c,s);s(c,u)}),o=!1}}}});var xd=p((KC,Ed)=>{"use strict";var kv=Bs(),Ov=_n();Ed.exports=function(e){return e=kv(e),Ov(function(r){return!e(r)})}});var Cd=p((YC,Sd)=>{"use strict";Sd.exports=function(e,r){var n=!1;function i(s){n||!r||(n=!0,r(s===!0?null:s))}return function(s){return function(o,a){return o&&i(o),s(o,function(c,u){c?i(c):e&&e(u),a(c,u)})}}}});var Pd=p((ZC,bd)=>{"use strict";bd.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var s=e;e=function(){return--s}}return function(o){function a(c){o(!0,function(u){n=!1,c(u||!0)})}return function(c,u){i?n?a(u):u(i):(i=c)?o(i,u):o(null,function(l,f){(i=i||l)?u(i):e(f)?u(null,f):(i=!0,n?u(null,f):a(u))})}}}});var Ms=p((XC,Rd)=>{"use strict";function Tv(t){return t}var Iv=Mt(),Dv=_n();Rd.exports=function(e,r){e=Iv(e)||Tv;var n={};return Dv(function(i){var s=e(i);return n[s]?!!r:(n[s]=!0,!r)})}});var _d=p((QC,Ld)=>{"use strict";var Fv=Ms();Ld.exports=function(e){return Fv(e,!0)}});var Od=p((eb,kd)=>{"use strict";var Nv=Rn(),Av=qs();kd.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?s():o();function s(){r(null,function(a,c){a===!0?o():a?e(!0,function(u){i(a)}):i(null,c)})}function o(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=Nv(c):typeof c!="function"&&(c=Av(c)),r=c,s()})}}}}});var Id=p((tb,Td)=>{"use strict";Td.exports={map:md(),asyncMap:wd(),filter:_n(),filterNot:xd(),through:Cd(),take:Pd(),unique:Ms(),nonUnique:_d(),flatten:Od()}});var Fd=p((rb,Dd)=>{"use strict";Dd.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<r;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var Bd=p((hr,qd)=>{"use strict";var Nd=Zf(),Ad=hd(),$d=Id();hr=qd.exports=Fd();for(le in Nd)hr[le]=Nd[le];var le;for(le in $d)hr[le]=$d[le];var le;for(le in Ad)hr[le]=Ad[le];var le});var Hd=p((nb,Md)=>{var $v=Nf(),Hs=Bd();Md.exports=function(t,e){e=e||"GOODBYE";var r=$v(e);return{source:Hs(t.source,r),sink:Hs(Hs.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var pr=p(fe=>{"use strict";var kn=wn();function qv(t){return t?Object.keys(t).length===0:!0}fe.set=function(e,r,n){let i,s;for(let o=0;o<r.length;o++){let a=r[o];e[a]=e[a]||{},i=e,s=a,e=e[a]}i[s]=n};fe.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let s=r[i];if(n=e=e[s],e==null)return e}return n};fe.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let s=r[i];if(n=e=e[s],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function Bv(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function Mv(t,e){(function r(n,i){let s=e[i];if(n)e.length-1===i?delete n[s]:i<e.length&&r(n[s],i+1);else return;qv(n[s])&&delete n[s]})(t,0)}function Hv(t,e){for(let r in e)t[r]=e[r];return t}fe.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return Hv(Bv(e,r),n)};fe.unmount=function(e,r){return Mv(e,r)};var On=t=>t==="source",Tn=t=>t==="sink",Ud=t=>t==="duplex",Uv=t=>t==="sync",jv=t=>t==="async",jd=t=>Uv(t)||jv(t),Wv=t=>On(t)||Tn(t)||Ud(t);fe.isRequest=jd;fe.isStream=Wv;function Us(t){return function(e){e(t||!0,()=>{})}}function Wd(t){return{source:kn.error(t),sink:Us(t)}}fe.errorAsStream=function(e,r){return On(e)?kn.error(r):Tn(e)?Us(r):Wd(r)};fe.errorAsStreamOrCb=function(e,r,n){return jd(e)?n(r):On(e)?kn.error(r):Tn(e)?Us(r):n(r),Wd(r)};fe.pipeToStream=function(e,r,n){On(e)?r(n):Tn(e)?n(r):Ud(e)&&kn(r,n,r)}});var js=p((ob,Gd)=>{function zd(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function zv(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var sb=Gd.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=zv(zd(r).slice(1),zd(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var Kd=p((ab,Jd)=>{"use strict";var Gv=Tf(),Ws=Df(),Vv=Hd(),Ht=pr(),Vd=js();Jd.exports=function(e,r,n){let i=Gv({message(){},request(o,a){if(!Array.isArray(o.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(o)}`));let c=o.name,u=o.args,l=!1,f=!1;u.push((d,h)=>{f=!0,l=!0,a(d,h)});try{e("async",c,u)}catch(d){if(l||f)throw Vd(d,"no callback provided to muxrpc async funtion");a(d)}},stream(o){o.read=function(c,u){if(u)return o.write(null,u);let{name:l,type:f,args:d}=c,h,m;if(o.read=null,!Ht.isStream(f))return o.write(null,new Error(`unsupported stream type: ${f}`));try{m=e(f,l,d)}catch(g){h=g}let w=Ws[f==="source"?"sink":f==="sink"?"source":"duplex"](o);return Ht.pipeToStream(f,w,h?Ht.errorAsStream(f,h):m)}},close(o){if(i=null,s.ended=!0,!s.closed&&(s.closed=!0,n)){let a=n;n=null,a(o)}}}),s=Vv(Ws(i,()=>{}));return s=r?r(s):s,s.remoteCall=function(o,a,c,u){if(a==="emit")return i.message(c);if(!(Ht.isRequest(o)||Ht.isStream(o)))throw new Error(`unsupported type: ${JSON.stringify(o)}`);if(Ht.isRequest(o))return i.request({name:a,args:c},u);let l=i.stream(),f=Ws[o](l,u);return l.write({name:a,args:c,type:o}),f},s.isOpen=function(){return!i.ended},s.close=function(o,a){if(typeof o=="function"&&(a=o,o=!1),!i){a&&a();return}if(o){i.destroy(o),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw Vd(c,"no callback provided for muxrpc close")}),this},s.closed=!1,s}});var Zd=p((ub,Yd)=>{"use strict";var Jv=js(),Kv=pr();function zs(t,e,r,n){for(let i in e){let s=e[i],o=r?r.concat(i):[i];if(s&&typeof s=="object"){let a=s;t[i]=zs({},a,o,n)}else{let a=s;t[i]=(...c)=>n(a,o,c)}}return t}function Yv(t){if(t)throw Jv(t,"callback not provided")}function Zv(t,e,r,n){t=t||{};function i(s,o,a){let c=typeof a[a.length-1]=="function"?a.pop():s==="sync"||s==="async"?null:Yv;if(typeof c=="function"){let u;try{u=r(s,o,a,c)}catch(l){return Kv.errorAsStreamOrCb(s,l,c)}return u}else return new Promise((u,l)=>{r(s,o,a,(f,d)=>{f?l(f):u(d)})})}return n?i("async","manifest",[function(s,o){if(s)return n(s);zs(t,o,null,i),n(null,o,t)}]):zs(t,e,null,i),t}Yd.exports=Zv});var eh=p((lb,Qd)=>{"use strict";var In=pr();function Xd(t){return Array.isArray(t)?t:t.split(".")}function Xv(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}Qd.exports=function(e){if(Xv(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(s){if(s.allow){r={};for(let o of s.allow)In.set(r,Xd(o),!0)}else r=null;if(s.deny)for(let o of s.deny)In.set(n,Xd(o),!0);else n={};return this}return e&&i(e),i.pre=s=>{if(s=Array.isArray(s)?s:[s],r&&!In.prefix(r,s))return new Error(`method:${s} is not in list of allowed methods`);if(n&&In.prefix(n,s))return new Error(`method:${s} is on list of disallowed methods`)},i.post=()=>{},i.test=s=>i.pre(s),i.get=()=>({allow:r,deny:n}),i}});var rh=p((fb,th)=>{"use strict";var Qv=eh(),Gs=pr();th.exports=function(e,r,n){n=Qv(n);function i(o,a){return o===Gs.get(r,a)}function s(o,a,c){if(a==="emit")throw new Error("emit has been removed");if(o==="async"&&i("sync",a)){let u=c.pop(),l;try{l=Gs.get(e,a).apply(this,c)}catch(f){return u(f)}return u(null,l)}if(!i(o,a))throw new Error(`no ${o}:${a}`);return Gs.get(e,a).apply(this,c)}return function(a,c,u){let l=n.pre(c,u);if(l)throw l;return s.call(this,a,c,u)}}});var sh=p((db,ih)=>{"use strict";var ey=_f(),ty=require("events").EventEmitter,ry=Kd(),ny=Zd(),iy=rh();function nh(t,e,r,n,i,s,o){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new ty;s||(s=ey);let u,l={_emit(d,h){return c&&c._emit(d,h),l},id:n},f=ry(iy(r,e,i).bind(l),s,d=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),u)){let h=u;u=null,h(d)}});if(ny(c,t,(d,h,m,v)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(d,h,m,v)},a),c._emit=c.emit,o){Object.__defineGetter__.call(c,"id",()=>l.id),Object.__defineSetter__.call(c,"id",h=>{l.id=h});let d=!0;c.createStream=h=>{if(u=h,d)return d=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(d,h){return f.close(d,h),this},c}ih.exports=function(t,e,r){return arguments.length>3?nh.apply(this,arguments):function(n,i,s){return nh(t,e,n,s,i,r,!0)}}});var Vs=p((Le,ch)=>{var hb=vs(),sy=Ns();function oh(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function ah(t,e,r){var n,i=!1,s;function o(){s||(s=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,u(),n?o():t(n=!0,o))}function c(l){u(),n||t(n=l,o)}function u(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){sy(function(l){t(null,function(f,d){if(n=n||f,f===!0)return e._isStdio?o():e.end();if(n=n||f)return oh(e),o(n);if(e._isStdio)e.write(d,function(){l()});else{var h=e.write(d);h===!1?e.once("drain",l):l()}})})})}function oy(t){var e=!1,r=!1,n;function i(){var s=t.read();if(s!==null&&n){var o=n;n=null,o(null,s)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(s){e=s,n&&n(e)}),function(s,o){n=o,e?o(e):r&&i()}}function Dn(t){var e=[],r=[],n,i=!1,s;function o(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),o(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,o()}),t.on("close",function(){n=!0,o()}),t.on("error",function(a){n=a,o()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let l=function(){for(;r.length;)r.shift()(a);c(a)};var u=l;if(n)return l();t.once("close",l),oh(t)}else r.push(c),o()}}var ay=Dn,Fn=function(t,e){return function(r){return ah(r,t,e)}},Nn=function(t){return Dn(t)};Le=ch.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return ah(r,t,e),Dn(t)}:Fn(t,e):Nn(t)};Le.sink=Fn;Le.source=Nn;Le.read=ay;Le.read1=Dn;Le.read2=oy;Le.duplex=function(t,e){return{source:Nn(t),sink:Fn(t,e)}};Le.transform=function(t){return function(e){var r=Nn(t);return Fn(t)(e),r}}});var lh=p((pb,An)=>{var cy=require("stream");An.exports=Js;An.exports.source=function(t){return Js(null,t)};An.exports.sink=function(t){return Js(t,null)};var uh=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Js(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,s,o=new cy;o.writable=o.readable=!0,o.write=function(w){return r.length?r.shift()(null,w):n.push(w),r.length||(s=!0),!!r.length},o.end=function(){e?n.length?v():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},o.source=function(w,g){n.length?(g(null,n.shift()),n.length||o.emit("drain")):((i=i||w)?g(i):r.push(g),s&&(s=!1,o.emit("drain")))};var a;t&&(a=t(o.source)),a&&!e&&(e=a);var c=[],u=[],l=!1,f=!1,d=!1;if(o.sink=function(w){e=w,uh(v)},e){o.sink(e),o.paused=!0;var h=o.on.bind(o);o.on=(w,g)=>{var C=h(w,g);return w==="data"&&o.paused&&uh(o.resume.bind(o)),C};var m=o.pipe.bind(o);o.pipe=function(w,g){var C=m(w,g);return o.paused&&o.resume(),C}}function v(){if(f=!1,!(!e||d)){for(;c.length&&!o.paused;)o.emit("data",c.shift());if(!o.paused){if(l)return o.emit("end");d=!0,e(null,function w(g,C){d=!1,o.paused?(g===!0?l=g:g?o.emit("error",g):c.push(C),f=!0):g&&(i=g)!==!0?o.emit("error",g):(i=i||g)?o.emit("end"):(o.emit("data",C),d=!0,e(null,w))})}}}return o.pause=function(){return o.paused=!0,o},o.resume=function(){return o.paused=!1,v(),o},o.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),o.emit("close")},o}});var dh=p((mb,fh)=>{fh.exports=uy;function uy(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function s(f,d){f&&(n=f,i&&l(n)),i=d,u()}var o;function a(f){o=o||f||!0,u()}function c(f){if(!o){if(i){l(n,f);return}r.push(f)}}if(t)return{push:c,end:a,source:s,buffer:r};return s.push=c,s.end=a,s.buffer=r,s;function u(){!i||(n?l(n):!r.length&&o?l(o):r.length&&l(null,r.shift()))}function l(f,d){var h=i;if(f&&e){var m=e;e=null,m(f===!0?null:f)}i=null,h(f,d)}}});var Wh=y(require("path")),Un=y(require("http")),zh=y(require("os")),Gh=y(require("crypto"));async function jn(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function jt(t,e){return new Promise((r,n)=>{let s=Un.request({socketPath:t,path:"/",method:"POST"},o=>r(o));s.on("error",o=>n(o)),s.write(e),s.end()})}var Oh=y(require("path"));async function Wn(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),s=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,u,l,f,d])=>{let h=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:h[1],pgrp:h[2],cwd:c,mntNS:u,cmd:d.replace(/\0/g," "),env:f.split("\0").reduce((m,v)=>{let w=v.indexOf("=");return w!==-1&&(m[v.substr(0,w)]=v.substr(w+1)),m},{})}}),mntNS:s}}async function vr(t){let{processes:e}=await Wn(t);return e.filter(r=>"VSCODE_REMOTE_CONTAINERS_SESSION"in r.env).map(r=>q(S({},r),{sessionId:r.env.VSCODE_REMOTE_CONTAINERS_SESSION}))}var F=y(require("path")),Ch=y(require("fs")),vy=y(require("os")),qn=y(require("child_process")),Xs=y(require("string_decoder"));var so=y(require("os")),Wt=y(require("fs")),oo=y(require("path"));var O;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(O||(O={}));var ao={info:3,debug:2,trace:1},Ay=Object.keys(ao).reduce((t,e)=>(t[ao[e]]=e,t),[]);var Vh=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function co(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function uo(t,e){let r=Yh(t);return{event(n){let i=Jh(n,e());i&&r.write(i)},join:r.join}}function We(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function Jh(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${zn(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${zn(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${zn(t.text)}`:void 0;default:throw Kh(t)}}function zn(t){return t.replace(Vh,"").replace(/(\r?\n)?$/,so.EOL)}function Kh(t){return new Error(`Unknown log event type: ${t.type}`)}function Yh(t){let e=[],r=!1,n,i;function s(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function o(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let u=e.join("");e.length=0,Wt.appendFile(t,u,l=>{l&&(l.code==="ENOENT"?Wt.mkdir(oo.dirname(t),{recursive:!0},f=>{f?(s(),console.error(f)):Wt.appendFile(t,u,d=>{s(),d&&console.error(d),o()})}):(s(),console.error(l))),s(),o()})}}return{write:o,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}function ze(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}var L=y(require("fs")),he=y(require("util"));function ft(t){return new Promise(e=>L.stat(t,(r,n)=>e(!r&&n.isFile())))}var yr=(0,he.promisify)(L.readFile),Xh=(0,he.promisify)(L.writeFile),My=(0,he.promisify)(L.appendFile),lo=(0,he.promisify)(L.rename),fo=(0,he.promisify)(L.readdir),Qh=(0,he.promisify)(L.unlink);var ep=(0,he.promisify)(L.rmdir),ho=(0,he.promisify)(L.rm),Hy=(0,he.promisify)(L.copyFile),po;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(po||(po={}));var gy=y(require("path"));var sp=y(require("path"));"use strict";"use strict";"use strict";var go;(function(t){t.DEFAULT={allowTrailingComma:!1}})(go||(go={}));"use strict";"use strict";var hh=y(require("path")),ph=y(hs()),ly=y(require("crypto")),fy=y(wn()),dy=y(require("util")),hy=y(require("string_decoder"));var nw=y(require("path")),ys=y(require("string_decoder"));var ue="\u2404";async function Nt(t,e,r,n="linux",i="Container"){let s=typeof t=="function",o=n==="win32",a=s?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:o?"powershell":"/bin/sh",args:o?["-NoProfile","-Command","-"]:[],output:e}):t;if(!s){let d=o?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${ue}; /bin/sh'
`;a.stdin.write(d),await new Promise(m=>{let v="",w=new ys.StringDecoder;a.stdout.on("data",function g(C){v+=w.write(C),v.includes(d)&&(a.stdout.off("data",g),m())})})}let c=iw(a),u;async function l(d,h){let m=u=(async()=>{try{await u}catch{}return f(Es(n,d),h)})();try{return await Promise.race([m,c.unexpectedExit])}finally{c.disposeStdioListeners(),u===m&&(u=void 0)}}async function f(d,h){let m=`Run in ${i.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,v;if((h==null?void 0:h.logOutput)!=="silent"&&(v=e.start(m,h==null?void 0:h.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:de,signal:lt}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${de}, signal: ${lt})`,code:de,signal:lt})}n==="win32"?a.stdin.write(`[Console]::Write('${ue}'); ( ${d} ); [Console]::Write("${ue}$LastExitCode ${ue}"); [Console]::Error.Write('${ue}')
`):a.stdin.write(`echo -n ${ue}; ( ${d} ); echo -n ${ue}$?${ue}; echo -n ${ue} >&2
`);let[w,g]=El(a.stdout,[1,2],(h==null?void 0:h.logOutput)==="continuous"?(de,lt,Hn)=>{lt===1&&Hn===0&&e.write(de,h==null?void 0:h.logLevel)}:()=>{}),C=El(a.stderr,[1],(h==null?void 0:h.logOutput)==="continuous"?(de,lt,Hn)=>{lt===0&&Hn===0&&e.write(de,h==null?void 0:h.logLevel)}:()=>{})[0];(h==null?void 0:h.stdin)&&(await w,a.stdin.write(h==null?void 0:h.stdin));let[k,M]=await g,[je]=await C,W=parseInt(M,10)||0;return((h==null?void 0:h.logOutput)===void 0||(h==null?void 0:h.logOutput)===!0)&&(e.write(k,h==null?void 0:h.logLevel),e.write(je,h==null?void 0:h.logLevel),W&&e.write(`Exit code ${W}`,h==null?void 0:h.logLevel)),(h==null?void 0:h.logOutput)==="continuous"&&W&&e.write(`Exit code ${W}`,h==null?void 0:h.logLevel),(h==null?void 0:h.logOutput)!=="silent"&&e.stop(m,v,h==null?void 0:h.logLevel),W?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${d}`,code:W,stdout:k,stderr:je}):{stdout:k,stderr:je}}return{exec:l,process:a,platform:n,path:Es(n,nw)}}function El(t,e,r){let n=e.map(()=>{let l,f=new Promise((d,h)=>l={resolve:d,reject:h});return S({promise:f},l)}),i=new ys.StringDecoder("utf8"),s=[],o=0,a=[];function c(l){let f=i.write(l);u(f)}function u(l){let f=l.indexOf(ue);if(f!==-1){let d=l.substr(0,f);s.push(d),r(d,o,a.length),a.push(s.join("")),s.length=0,a.length===e[o]&&(n[o].resolve(a),o++,a=[],o===e.length&&t.off("data",c)),f+1<l.length&&u(l.substr(f+1))}else s.push(l),r(l,o,a.length)}return t.on("data",c),n.map(l=>l.promise)}function iw(t){let e,r=new Promise((c,u)=>e=u),n=[],i=[],s=c=>n.push(c),o=c=>i.push(c);return t.stdout.on("data",s),t.stderr.on("data",o),t.exit.then(({code:c,signal:u})=>{e(`Shell server terminated (code: ${c}, signal: ${u})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",s),t.stderr.off("data",o),n.length=0,i.length=0}}}var _S=y(require("path")),nf=y(require("fs")),Yw=y(Hl()),Zw=y(require("string_decoder")),sf=y(hs());var Xw=y(require("crypto")),Qw=y(require("util"));var Nw=y(require("path"));var jw=y(require("net")),Ww=y(tf());var zw=y(require("events"));var Gw=y(require("path"));var lS=y(require("http")),fS=y(require("https"));var rf=y(require("path"));async function Pn(t){return new Promise(e=>setTimeout(e,t))}var of;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(of||(of={}));var tv=y(require("path"));var mh=y(require("stream"));var Yb=sh(),Zb=Vs(),Xb=lh(),Qb=dh();var eP=new Set;var vh=/^\\\\wsl(\.localhost|\$)?\\/;function $n(t){return vh.test(t.toLowerCase())}function Ks(t){let e=t.toLowerCase(),r=vh.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function Ys(t,e,r){let{stdout:n}=await Ee({exec:ur(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}var EP=y(require("path")),Eh=y(require("net")),xh=y(require("os"));var wy=y(require("os"));var NP=Vs(),Sh;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Sh||(Sh={}));var XP=F.join(__dirname,"..","..","node_modules",".bin","ts-node"),af=F.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Ee(t){let{exec:e,cmd:r,args:n,cwd:i,env:s,stdin:o,output:a,print:c}=t,u=await e({cmd:r,args:n,cwd:i,env:s,output:a});return new Promise((l,f)=>{let d=[],h=[],m=c==="continuous"?new Xs.StringDecoder:void 0;u.stdout.on("data",g=>{d.push(g),c==="continuous"&&a.write(m.write(g))}),u.stdout.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let v=c==="continuous"?new Xs.StringDecoder:void 0;u.stderr.on("data",g=>{h.push(g),c==="continuous"&&a.write(ze(v.write(g)))}),u.stderr.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let w=[];u.exit.then(({code:g})=>{try{w.forEach(M=>M.dispose());let C=Buffer.concat(d),k=Buffer.concat(h);(c===!0||g&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(ze(k.toString()))),c&&g&&a.write(`Exit code ${g}`),g?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:C,stderr:k,code:g}):l({stdout:C,stderr:k})}catch(C){f(C)}},f),o instanceof Buffer?(u.stdin.write(o,g=>{g&&f(g)}),u.stdin.end()):o instanceof Ch.ReadStream?o.pipe(u.stdin):typeof o=="function"&&w.push(o(g=>u.stdin.write(g)))})}function ur(t){return async function(e){let{cmd:r,args:n,output:i}=e,s=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,o=i.start(s),a=e.cwd||t,c=e.env?S(S({},process.env),e.env):process.env,u=await bh(r,a,c,i),l=qn.spawn(u,n,{cwd:a,env:c,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((f,d)=>{l.once("error",h=>{i.stop(s,o),d(h)}),l.once("close",(h,m)=>{i.stop(s,o),f({code:h,signal:m})})}),async terminate(){l.kill("SIGKILL")}}}}function Zs(t,e,r,n){return async function(i){let{env:s,cmd:o,args:a,output:c}=i,u=i.cwd||r,l=u?`cd '${u}' && `:"",f=Object.keys(s||{}).map(M=>`${M}='${s[M]}' `).join(""),d=(a||[]).map(M=>` '${M.replace(/'/g,`'"'"'`)}'`).join(""),h=`${l}${f}${o}${d}`,m=h!==o?["/bin/sh","-c",h]:[h],v=[...e,...m],w=`Run: ${t} ${v.join(" ").replace(/\n.*/g,"")}`,g=c.start(w),C=await bh(t,process.cwd(),process.env,c),k=qn.spawn(C,v,{windowsHide:!0,env:n?S(S({},process.env),n):void 0});return{stdin:k.stdin,stdout:k.stdout,stderr:k.stderr,exit:new Promise((M,je)=>{k.once("error",W=>{c.stop(w,g),je(W)}),k.once("close",(W,de)=>{c.stop(w,g),M({code:W,signal:de})})}),async terminate(){k.kill("SIGKILL")}}}}async function bh(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(F.isAbsolute(t))return await mr(t)||t;if(/[/\\]/.test(t)){let a=F.join(e,t);return await mr(a)||a}let i,s;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,s=c.split(F.delimiter).filter(Boolean),s.push(F.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(s===void 0||s.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=F.join(e,t);return await mr(a)||a}for(let a of s){let c;F.isAbsolute(a)?c=F.join(a,t):c=F.join(e,a,t);let u=await mr(c);if(u)return u}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let o=F.join(e,t);return await mr(o)||o}var Ph=process.env.PATHEXT,Rh=Ph?Ph.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function mr(t){if(Rh.indexOf(F.extname(t))!==-1)return await ft(t)?t:void 0;for(let e of Rh){let r=t+e;if(await ft(r))return r}}async function Ut(t,e){if($n(t)){let r=Ks(t),n=await Ys(r,t,e);return Zs("wsl",["-d",r,"-e"],n)}return ur(t)}function Es(t,e){return typeof e!="string"&&"win32"in e?t==="win32"?e.win32:e.posix:e}var yy=y(require("net")),Ey=y(require("path"));var xy=0;function Bn(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++xy)}:{}}async function ut(t,...e){let r=Qs(t);return Ee(q(S({},r),{args:(r.args||[]).concat(e)}))}async function Lh(t,...e){let r=Qs(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Ee(q(S({},r),{args:(r.args||[]).concat(e)}))}function gr(t,e,r){return async function(n){let{exec:i,cmd:s,args:o,env:a}=Qs(t),{argsPrefix:c,args:u}=by(e,r,n,!1);return i({cmd:s,args:(o||[]).concat(u),env:a,output:Sy(n.output,s,c)})}}function Sy(t,e,r){return Cy(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function Cy(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return We(q(S({},t),{get dimensions(){return t.dimensions},event:s=>t.event("text"in s?q(S({},s),{text:s.text.replace(n,r)}):s)}))}function by(t,e,r,n){let{env:i,cwd:s,cmd:o,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(l=>c.push("-e",`${l}=${i[l]}`)),s&&c.push("-w",s),c.push(t);let u=c.slice();return c.push(o),a&&c.push(...a),{argsPrefix:u,args:c}}function Qs(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:S(S({},t.dockerEnv),Bn(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:S(S({},t.env),Bn(t.env)),output:t.output}:q(S({},t),{env:S(S({},t.env),Bn(t.env))})}async function _h(t,e){let r={exec:await Ut(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:n,stderr:i}=await ut(r,"rm","-f",t.containerId);e.write("Command output: "+JSON.stringify({stdout:n.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopCompose"){let n=gr(r,t.containerId,t.user),i=await Nt(n,e);if((await vr(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let o=["--project-name",t.projectName];t.composeFiles.forEach(c=>o.push("-f",c)),t.envFile&&o.push("--env-file",t.envFile),o.push("stop","-t","0"),t.runServices&&t.runServices.length&&(o.push(...t.runServices),t.runServices.indexOf(t.service)===-1&&o.push(t.service));let a;try{let c=q(S({},r),{cmd:t.dockerComposeCLI.cmd,args:t.dockerComposeCLI.args});if(t.buildContainerRunArgs){let{stdout:f}=await ut(r,...t.buildContainerRunArgs);a=f.toString().trim(),c={exec:gr(r,a,"root"),cmd:"docker-compose",env:{},output:e}}let{stdout:u,stderr:l}=await Lh(c,...o);e.write("Command output: "+JSON.stringify({stdout:u.toString(),stderr:l.toString()}))}finally{a&&await ut(r,"rm","-f",a)}}}}async function kh(t,e){let r={exec:await Ut(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:n,stderr:i}=await ut(r,"rm","-f",t.containerId);e.write("Command output: "+JSON.stringify({stdout:n.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopContainer"){let n=gr(r,t.containerId,t.user),i=await Nt(n,e);if((await vr(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let{stdout:o,stderr:a}=await ut(r,"stop",t.containerId);e.write("Command output: "+JSON.stringify({stdout:o.toString(),stderr:a.toString()}))}}}var Mn=process.argv[2],Th=process.argv[3],eo=O[process.argv[4]]||O.Info,Py=new Date(parseInt(process.argv[6],10)),Ih=process.argv[5]?Oh.join(process.argv[5],`shutdownMonitor-${Py.toISOString().replace(/:/g,"-")}.log`):void 0,to=[],Dh=Ih?uo(Ih,()=>Math.min(O.Debug,eo)):void 0;Dh&&to.push(Dh);to.push({event:t=>{O.Trace>=eo&&jt(Mn,JSON.stringify({type:"log",event:t})).catch(e=>{console.error(e)})}});var I=We(co(to));I.write("Starting monitor process...");var Ry=Date.now(),Z;(async()=>{let t=0;for(;;)try{let e=await jt(Mn,JSON.stringify({type:"poll"})),r=await jn(e);I.write("Received message: "+JSON.stringify(r));for(let n of r)if(n.type==="cleanup"){try{await Fh(!0)}catch(i){I.write("Unexpected error: "+(i&&(i.stack||i.message)||String(i)))}return}else n.type==="configure"&&(Z=n.options,Z.logLevel&&(eo=Z.logLevel),jt(Mn,JSON.stringify({type:"reply",sequence:n.sequence})).catch(i=>{I.write("Error confirming configuration: "+(i&&(i.stack||i.message)||String(i)))}));t=0}catch(e){if(I.write("Error polling extension: "+(e&&(e.stack||e.message)||String(e))),e&&(e.code==="ECONNREFUSED"||e.code==="ENOENT")){await Fh(!1);return}++t>=5&&await Pn(1e3)}})().catch(t=>{I.write("Unexpected error: "+(t&&(t.stack||t.message)||String(t)))});async function Fh(t){if(I.write(`Cleaning up after ${Date.now()-Ry} ms...`),Z)switch(Z.delay&&(I.write(`Delaying for ${Z.delay} ms.`),await Pn(Z.delay)),Th){case"dockerCompose":await _h(Z,I);break;case"singleContainer":await kh(Z,I);break;case"test":let{stdout:e,stderr:r}=await Ee({exec:await Ut(Z.cwd,I),cmd:Z.cmd,args:Z.args,env:Z.env,output:I});I.write("Command output: "+JSON.stringify({stdout:e.toString(),stderr:r.toString()}));break;default:I.write(`Type does not exist: ${Th}`);break}else I.write("Not configured!");if(I.write("Done."),t)try{let e=await jt(Mn,JSON.stringify({type:"done"})),r=await jn(e);I.write("Received reply: "+JSON.stringify(r))}catch(e){I.write("Error confirming to extension: "+(e&&(e.stack||e.message)||String(e)))}}
//# sourceMappingURL=shutdownMonitorProcess.js.map
